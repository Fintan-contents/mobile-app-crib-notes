---
title: メッセージの管理
---

次に挙げる品質観点の向上を目的として、メッセージを集約的に管理します。

- 同一文言の集約、文体や体裁の統一（UI/UX）
- 保守性
- 多言語化対応への拡張性

## メッセージの種類

管理対象とするメッセージは「ラベル」、「バリデーション」、「メッセージ」といったメッセージ種類に分類し、それぞれにルールを設けて管理します。
管理対象とするメッセージとメッセージの種類の関連付けを表したのが次の表となります。

<table>
  <thead>
    <th colspan="2">管理対象とするメッセージ</th>
    <th>メッセージの種類</th>
    <th>主な使用箇所</th>
  </thead>
  <tbody>
    <tr>
      <td colspan="2">ラベル</td>
      <td rowspan="4">ラベル</td>
      <td rowspan="6">画面表示項目</td>
    </tr>
    <tr>
      <td colspan="2">画面タイトル</td>
    </tr>
    <tr>
      <td colspan="2">入力テキスト内のプレースホルダー</td>
    </tr>
    <tr>
      <td colspan="2">操作ガイダンス</td>
    </tr>
    <tr>
      <td rowspan="2">入力エラーメッセージ</td>
      <td>単項目エラー</td>
      <td rowspan="2">バリデーション</td>
    </tr>
    <tr>
      <td>相関項目エラー</td>
    </tr>
    <tr>
      <td rowspan="4">操作メッセージ</td>
      <td>情報メッセージ</td>
      <td rowspan="4">メッセージ</td>
      <td rowspan="3">スナックバー</td>
    </tr>
    <tr>
      <td>警告メッセージ</td>
    </tr>
    <tr>
      <td>エラーメッセージ</td>
    </tr>
    <tr>
      <td>確認メッセージ</td>
      <td>ダイアログ</td>
    </tr>
  </tbody>
</table>

## メッセージキーの体系

メッセージは一意のメッセージキーとそのメッセージ文言として管理します。
メッセージキーの体系はメッセージの種類ごとに異なります。
以下、それぞれの種類に応じたメッセージ体系を説明します。

### ラベル

ラベルのメッセージキーには日本語を用います。
メッセージキーとメッセージ文言は同じ値となります。
メッセージのプレースホルダーもそのままメッセージキーとして含めます。

```typescript title="ラベル"
export const bundledMessages = {
  /* 中略 */
  パスワード: 'パスワード',
  ホーム: 'ホーム',
  '最大{0}件': '最大{0}件',
  'ユーザー名とパスワードを入力してください。': 'ユーザー名とパスワードを入力してください。',
  /* 中略 */
} as const;
```

### バリデーション

メッセージキーには`validation`をプレフィックスとしたピリオド区切りの英単語を用います。
英単語はバリデーションの種類を表すものとし、このアプリケーションのバリデーションライブラリとして採用する[Yup](https://github.com/jquense/yup)の[API](https://github.com/jquense/yup#api)に対応したものとします。
メッセージのプレースホルダーはメッセージキーに含めません。

```typescript title="バリデーション"
export const bundledMessages = {
  /* 中略 */
  'validation.string.required': '{0}は必須項目です。',
  'validation.string.length': '{0}は{1}文字でなければなりません。',
  'validation.string.min': '{0}は{1}文字以上でなければなりません。',
  'validation.string.max': '{0}は{1}文字以下でなければなりません。',
  /* 中略 */
} as const;
```

### メッセージ

メッセージはユーザの操作確認や操作結果を通知するメッセージ文言を管理します。
メッセージキーには、メッセージの機能を表すピリオド区切りの英単語をプレフィックスとした、簡潔な日本語を用います。
メッセージ文言にプレースホルダーの指定がある場合、それが分かるようにメッセージキーにも含めます。
プレフィックスの種類は次の通りです。

|プレフィックス|メッセージの機能|
|--|--|
|fw|基盤部品、フレームワーク|
|app|アプリの共通メッセージ|
|app.［機能名］|アプリの個別メッセージ|

```typescript title="メッセージ"
export const bundledMessages = {
  /* 中略 */
  'fw.コンフリクト': '処理が競合しました。',
  'app.登録完了': '登録しました。',
  'app.task.期限超過{0}件エラー': '期限を超過したタスクが{0}件です。確認してください。',
  'app.task.タスク登録完了': 'タスクを登録しました。',
  /* 中略 */
} as const;
```

---
title: ログアウト
---

このアプリでは、Cookie経由で受け渡すセッションIDの破棄と、セキュアストレージからログイン中のアカウントIDおよびログイン資格情報を破棄することでログアウトします。

なお、匿名アカウントはログアウトすると再ログイン出来なくなるため、ログアウト操作が出来ません。

## 処理フロー

ログアウトの処理フローは以下になります。

![ログアウトの処理フロー](auth-logout-flow.drawio.png)

| No | 処理 | 内容 |
|:--|:--|:--|
| ① | ログアウトのリクエスト | アプリは、バックエンドにログアウトリクエストを送ります。ネイティブの機能を利用して、端末内に保持されたCookie（セッションID）をHTTPリクエストに設定します。 |
| ② | ログアウト | バックエンドは、ログアウト処理（セッションの破棄）をします。 |
| ③ | ログアウト結果の返却 | バックエンドはログアウト処理の結果をアプリに返却します。 |
| ④ | ログアウトしたアカウントIDとログイン資格情報の破棄 | アプリは、ログイン中のアカウントIDとして保存していたアカウントIDとログイン資格情報を、セキュアストレージから破棄します。 |

## 利用方法

ログアウトは`useLogout`フックを使用します。

```typescript title="ログアウトの利用方法"
import {useLogout} from 'features/account/hooks/useLogout';

export const useLogoutUseCase = () => {
  const {mutateAsync: callLogout, isLoading} = useLogout();
  const logout = useCallback(async () => {
    try {
      await callLogout();
    } catch (e) {
      // エラー処理
    }
  }, [callLogout]);
  return {logout, isLoading};
};
```

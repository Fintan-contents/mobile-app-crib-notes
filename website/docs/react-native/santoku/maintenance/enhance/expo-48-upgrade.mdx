---
title: Expo SDK 48ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰
---

:::infoå‚è€ƒ
ä»¥ä¸‹ã®è¨˜äº‹ã‚’å‚è€ƒã«ã—ã¦ã€ã“ã®ã‚¢ãƒ—ãƒªã®Expo SDKã‚’48ã«ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã—ã¾ã—ãŸã€‚
ä¸»ãªå¤‰æ›´ç‚¹ã¨ã“ã®ã‚¢ãƒ—ãƒªã§å®Ÿæ–½ã—ãŸã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰æ‰‹é †ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚

- [Expo SDK 48](https://blog.expo.dev/expo-sdk-48-ccb8302e231)
- [React Native 0.71: TypeScript by Default, Flexbox Gap, and more...](https://reactnative.dev/blog/2023/01/12/version-071)

ãªãŠã€ã“ã®ã‚¢ãƒ—ãƒªã§ã¯ä½¿ç”¨ã—ã¦ã„ãªã„ãŸã‚ã€EASã‚„Classic Updatesã«é–¢ã™ã‚‹å†…å®¹ã¯è¨˜è¼‰ã—ã¾ã›ã‚“ã€‚
:::

## Expo SDK 48ã®ä¸»ãªå¤‰æ›´

### React Native 0.71.6 and React 18.2.0

React Nativeã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚¨ãƒ³ã‚¸ãƒ³ãŒFlexboxãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®[gap](https://developer.mozilla.org/en-US/docs/Web/CSS/gap)ã€[rowGap](https://developer.mozilla.org/en-US/docs/Web/CSS/row-gap)ã€[columnGap](https://developer.mozilla.org/en-US/docs/Web/CSS/column-gap)ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸï¼ˆè©³ç´°ã¯[ã“ã¡ã‚‰](https://reactnative.dev/blog/2023/01/12/version-071#simplifying-layouts-with-flexbox-gap)ï¼‰ã€‚
ãã®ä»–ã€ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ã‚„ã‚¹ã‚¿ã‚¤ãƒ«ã€ã‚¤ãƒ™ãƒ³ãƒˆã«é–¢ã—ã¦Webã«ã‚¤ãƒ³ã‚¹ãƒ‘ã‚¤ã‚¢ã•ã‚ŒãŸãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚‚è¿½åŠ ã•ã‚Œã¦ã„ã¾ã™ï¼ˆè©³ç´°ã¯[ã“ã¡ã‚‰](https://reactnative.dev/blog/2023/01/12/version-071#web-inspired-props-for-accessibility-styles-and-events)ï¼‰ã€‚

Hermesã¯`JSON.parse`ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒæ”¹å–„ã•ã‚Œã¾ã—ãŸã€‚

TypeScriptã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆã¯ã€`react-native`ã«å‹å®šç¾©ãŒå«ã¾ã‚Œã‚‹ã‚ˆã†ã«ãªã£ãŸãŸã‚ã€`@types/react-native`ã‚’å‰Šé™¤ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

è©³ç´°ã¯ã€ä»¥ä¸‹ã®ãƒªãƒ³ã‚¯å…ˆã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

- [React Native 0.71: TypeScript by Default, Flexbox Gap, and more...](https://reactnative.dev/blog/2023/01/12/version-071)
- [React Native CHANGELOG](https://github.com/facebook/react-native/blob/main/CHANGELOG.md#v0716)
- [React CHANGELOG](https://github.com/facebook/react/blob/main/CHANGELOG.md#1820-june-14-2022)

### JavaScriptã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¨ãƒ³ã‚¸ãƒ³ã‚’Hermesã«å¤‰æ›´

HermesãŒJavaScriptã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¨ãƒ³ã‚¸ãƒ³ã«ãªã‚Šã¾ã—ãŸã€‚

Hermesã§ã¯ã€ã‚¢ãƒ—ãƒªèµ·å‹•å¾Œã«ãƒ¦ãƒ¼ã‚¶ãŒã‚¢ãƒ—ãƒªã‚’ä½¿ç”¨ã§ãã‚‹ã¾ã§ã®æ™‚é–“ï¼ˆTTI: Time to Interactiveï¼‰ãŒçŸ­ç¸®ã•ã‚Œã¾ã™ã€‚ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã‚‚å‰Šæ¸›ã•ã‚Œã‚‹ãªã©ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã®å¤§ããªæ”¹å–„ãŒæœŸå¾…ã§ãã¾ã™ã€‚

ã¾ãŸã€ãƒ‡ãƒãƒƒã‚°æ©Ÿèƒ½ã‚‚JavaScriptCoreï¼ˆJSCï¼‰ã«æ¯”ã¹ã‚‹ã¨å¤§å¹…ã«æ”¹å–„ã•ã‚Œã¦ã„ã¾ã™ã€‚

è©³ç´°ã¯ã€[Hermes as the Default](https://reactnative.dev/blog/2022/07/08/hermes-as-the-default)ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

### å…¨ã¦ã®Expoãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§APIãƒ¬ãƒ™ãƒ«ã«33ã‚’è¨­å®š

Androidã®`compileSdkVersion`ã¨`targetSdkVersion`ã¯ã€ã™ã¹ã¦ã®Expoãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§APIãƒ¬ãƒ™ãƒ«33ã«è¨­å®šã•ã‚Œã¾ã—ãŸã€‚

ã“ã‚Œã¯ã€2023/08/31ä»¥é™ã«é©ç”¨ã•ã‚Œã‚‹ï¼ˆ2023/11/01ã¾ã§æœŸé™å»¶é•·ã‚’ãƒªã‚¯ã‚¨ã‚¹ãƒˆå¯èƒ½ï¼‰[Google Playã‚¢ãƒ—ãƒªã®å¯¾è±¡APIãƒ¬ãƒ™ãƒ«è¦ä»¶](https://support.google.com/googleplay/android-developer/answer/11926878)ã‚’æº€ãŸã—ã¦ã„ã¾ã™ã€‚

### Expo Goã§RTLè¨€èªã®ã‚µãƒãƒ¼ãƒˆ

<!-- ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã”ã¨ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒè¦‹å½“ãŸã‚‰ãªã„ -->
Expo Goã§RTLè¨€èªãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¾ã—ãŸã€‚`app.json`ã‚„`app.config.js`ã§æœ‰åŠ¹åŒ–ã™ã‚‹æ–¹æ³•ã¯ã€[Enabling RTL Support](https://docs.expo.dev/guides/localization/#enabling-rtl-support)ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

### New Architecture/Fabricã®ã‚µãƒãƒ¼ãƒˆ

`expo-dev-client`ã‚’é™¤ãå…¨ã¦ã®Expoãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ã€New Architecture/FabricãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¾ã—ãŸã€‚

ãŸã ã—ã€New Architectureã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ãªã„ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒå¤šã„ãŸã‚ã€New Architectureã®æœ‰åŠ¹åŒ–ã¯ã¾ã æ¨å¥¨ã•ã‚Œã¦ã„ãªã„ã‚ˆã†ã§ã™ã€‚
ã¾ãŸã€Expo Goã¯New Architectureã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã›ã‚“ã€‚

### ExpoãŒã‚µãƒãƒ¼ãƒˆã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚„æ©Ÿèƒ½

#### ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®æ›´æ–°

ExpoãŒç®¡ç†ã—ã¦ã„ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®å†…ã€ãƒ¡ã‚¸ãƒ£ãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ãªã©å¤§ããªãƒªãƒªãƒ¼ã‚¹ãŒã‚ã£ãŸã‚‚ã®ã‚’è¨˜è¼‰ã—ã¾ã™ã€‚

- [Expo Image v1.0](https://docs.expo.dev/versions/v48.0.0/sdk/image/)
  - React Nativeã®[Image](https://reactnative.dev/docs/image)ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å¾Œç¶™ã¨ã—ã¦ã€ã¾ãŸã¯[react-native-fast-image](https://github.com/DylanVann/react-native-fast-image)ã®ä»£æ›¿ãˆã‚’æ„å›³ã—ã¦ä½œæˆã•ã‚ŒãŸãƒ©ã‚¤ãƒ–ãƒ©ãƒª
  - [ãƒ¢ãƒ€ãƒ³ãªç”»åƒãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ](https://docs.expo.dev/versions/v48.0.0/sdk/image/#supported-image-formats)ã‚’ã‚µãƒãƒ¼ãƒˆ
  - ã‚¹ãƒ”ãƒ¼ãƒ‰ãŒé‡è¦–ã•ã‚ŒãŸè¨­è¨ˆ
  - [placeholders](https://docs.expo.dev/versions/v48.0.0/sdk/image/#placeholder)ã‚„[transitions](https://docs.expo.dev/versions/v48.0.0/sdk/image/#transition)ã€[blurhash](https://docs.expo.dev/versions/v48.0.0/sdk/image/#imagesource)ãªã©ã€æ—¢å­˜ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã¯è¿½åŠ å®Ÿè£…ã‚’å¿…è¦ã¨ã™ã‚‹å ´åˆãŒã‚ã£ãŸæ©Ÿèƒ½ãªã©ã‚‚ã‚µãƒãƒ¼ãƒˆ
- [Expo Router v1.0](https://expo.github.io/router/docs/)
  - ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ãƒ™ãƒ¼ã‚¹ã§ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°å¯èƒ½ãªãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒ©ã‚¤ãƒ–ãƒ©ãƒª

#### éæ¨å¥¨ã¨ãªã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒª

ä»¥ä¸‹ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒéæ¨å¥¨ã¨ãªã‚Šã¾ã—ãŸã€‚

- [expo-random](https://docs.expo.dev/versions/v48.0.0/sdk/random/)
  - expo-randomã¯ã€[expo-crypto](https://docs.expo.dev/versions/v48.0.0/sdk/crypto/)ã«çµ±åˆã•ã‚Œã¾ã—ãŸ

#### Expo Module APIã®æ”¹å–„

`async`/`await`é–¢æ•°ã§ã€Swift ConcurrencyãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¾ã—ãŸã€‚

ã¾ãŸã€`TypedArray`ã®ã‚µãƒãƒ¼ãƒˆã‚‚é€²ã‚ã‚‰ã‚Œã¦ãŠã‚Šã€`expo-crypto`ã®`getRandomValues`ã‚„`digest`ã§ä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã™ã€‚

#### `app.json`ã®éæ¨å¥¨ã¨ãªã£ã¦ã„ãŸé …ç›®ã®å‰Šé™¤

`entryPoint`ãŒ`app.json`ã‹ã‚‰å‰Šé™¤ã•ã‚Œã¾ã—ãŸã€‚ä»£ã‚ã‚Šã«ã€`package.json`ã®[main](https://docs.npmjs.com/cli/v9/configuring-npm/package-json#main)ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚

#### expo-auth-session

[expo-auth-session](https://docs.expo.dev/versions/v48.0.0/sdk/auth-session/)ã®`useProxy`ãŒéæ¨å¥¨ã«ãªã‚Šã¾ã—ãŸã€‚

#### expo-keep-awake

[expo-keep-awake](https://docs.expo.dev/versions/v48.0.0/sdk/keep-awake/)ã®`activateKeepAwake`ãŒéæ¨å¥¨ã«ãªã‚Šã¾ã—ãŸã€‚ä»£ã‚ã‚Šã«ã€`activateKeepAwakeAsync`ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚

#### @react-native-community/datetimepicker

[@react-native-community/datetimepicker](https://github.com/react-native-datetimepicker/datetimepicker/tree/v6.7.3)ã®ä»¥ä¸‹ã®é …ç›®ãŒéæ¨å¥¨ã«ãªã‚Šã¾ã—ãŸã€‚

- positiveButtonLabel
- negativeButtonLabel
- neutralButtonLabel

ä»£ã‚ã‚Šã«ã€ä»¥ä¸‹ã®é …ç›®ãŒè¿½åŠ ã•ã‚Œã¦ã„ã¾ã™ã€‚

- positiveButton
- negativeButton
- neutralButton

### Expo SDK 45ã®ã‚µãƒãƒ¼ãƒˆçµ‚äº†

Expo SDK 45ãŒã‚µãƒãƒ¼ãƒˆå¯¾è±¡å¤–ã«ãªã‚Šã¾ã—ãŸã€‚Expo SDK 45ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆã¯ã€Expo SDK 46ä»¥é™ã«ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

ãªãŠã€æ¬¡ã®ãƒªãƒªãƒ¼ã‚¹ã§ã¯Expo SDK46ã¨47ã®ã‚µãƒãƒ¼ãƒˆãŒçµ‚äº†ã™ã‚‹è¦‹è¾¼ã¿ã®ã‚ˆã†ã§ã™ã€‚

## ã“ã®ã‚¢ãƒ—ãƒªã§å®Ÿæ–½ã—ãŸã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã®æ‰‹é †

ã“ã®ã‚¢ãƒ—ãƒªã§ã¯ã€ä»¥ä¸‹ã®ä½œæ¥­ã‚’ä¸Šã‹ã‚‰é †ã«å®Ÿæ–½ã—ã¦Expo SDK 48ã«ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã—ã¾ã—ãŸã€‚

- `npm install expo@^48.0.0`ã‚’å®Ÿè¡Œã—ã¦ã€Expo SDKã‚’ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰
- `npx expo install --fix`ã‚’å®Ÿè¡Œã—ã¦ã€ExpoãŒç®¡ç†ã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰
- [`@expo/config-plugins`ã‚’`devDependencies`ã«è¿½åŠ ](#expoconfig-pluginsã‚’devdependenciesã«è¿½åŠ )
- [`jest-expo`ã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰](#jest-expoã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰)
- [æ—¢å­˜ã®ãƒ‘ãƒƒãƒãƒ•ã‚¡ã‚¤ãƒ«ã®æ›´æ–°](#æ—¢å­˜ã®ãƒ‘ãƒƒãƒãƒ•ã‚¡ã‚¤ãƒ«ã®æ›´æ–°)
- [ExpoãŒç®¡ç†ã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ä¾å­˜ã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®æ›´æ–°](#expoãŒç®¡ç†ã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ä¾å­˜ã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®æ›´æ–°)
- `node_modules`ã€`package-lock.json`ã‚’å‰Šé™¤ã—ã¦ã€`npm i`ã‚’å®Ÿè¡Œ
- [Expoã®æ›´æ–°å±¥æ­´ã®ç¢ºèªã¨å¯¾å¿œ](#expoã®æ›´æ–°å±¥æ­´ã®ç¢ºèªã¨å¯¾å¿œ)
  - [`expo-random`ã‹ã‚‰`expo-crypto`ã¸ã®ç§»è¡Œ](#expo-randomã‹ã‚‰expo-cryptoã¸ã®ç§»è¡Œ)
  - [`expo-keep-awake`ã®`activateKeepAwake`ãŒéæ¨å¥¨ã«ãªã£ãŸã“ã¨ã¸ã®å¯¾å¿œ](#expo-keep-awakeã®activatekeepawakeãŒéæ¨å¥¨ã«ãªã£ãŸã“ã¨ã¸ã®å¯¾å¿œ)
  - [`@react-native-community/datetimepicker`ã®ä¸€éƒ¨ã®é …ç›®ãŒéæ¨å¥¨ã«ãªã£ãŸã“ã¨ã¸ã®å¯¾å¿œ](#react-native-communitydatetimepickerã®ä¸€éƒ¨ã®é …ç›®ãŒéæ¨å¥¨ã«ãªã£ãŸã“ã¨ã¸ã®å¯¾å¿œ)
- [React Nativeã®æ›´æ–°å±¥æ­´ã®ç¢ºèªã¨å¯¾å¿œ](#react-nativeã®æ›´æ–°å±¥æ­´ã®ç¢ºèªã¨å¯¾å¿œ)
  - [`@types/react-native`ã‚’ä¾å­˜ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‹ã‚‰å‰Šé™¤](#typesreact-nativeã‚’ä¾å­˜ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‹ã‚‰å‰Šé™¤)
- [expo-template-blank-typescriptã®æ›´æ–°å±¥æ­´ã®ç¢ºèªã¨å¯¾å¿œ](#expo-template-blank-typescriptã®æ›´æ–°å±¥æ­´ã®ç¢ºèªã¨å¯¾å¿œ)
- [expo-template-bare-minimumã®æ›´æ–°å±¥æ­´ã®ç¢ºèªã¨å¯¾å¿œ](#expo-template-bare-minimumã®æ›´æ–°å±¥æ­´ã®ç¢ºèªã¨å¯¾å¿œ)
  - [`.buckconfig`ã®å‰Šé™¤ã¨`.gitignore`ã®æ›´æ–°](#buckconfigã®å‰Šé™¤ã¨gitignoreã®æ›´æ–°)
- [React Native Upgrade Helper](https://react-native-community.github.io/upgrade-helper/?from=0.69.6&to=0.70.8)ã‚’å‚ç…§ã—ã¦ã€React Nativeã®æ›´æ–°ã‚’ç¢ºèª
  - ã“ã®ã‚¢ãƒ—ãƒªã§å¿…è¦ãªå¯¾å¿œã¯ã€[expo-template-bare-minimumã®æ›´æ–°](https://github.com/expo/expo/commits/sdk-48/templates/expo-template-bare-minimum)ã§å¯¾å¿œã•ã‚Œã¦ã„ã¾ã—ãŸ
- [JavaScriptã®ã‚¨ãƒ³ã‚¸ãƒ³ã‚’Hermesã«å¤‰æ›´](#javascriptã®ã‚¨ãƒ³ã‚¸ãƒ³ã‚’hermesã«å¤‰æ›´)
- `npm run prebuild`ã‚’å®Ÿè¡Œã—ã¦ãƒã‚¤ãƒ†ã‚£ãƒ–ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å†ç”Ÿæˆ
- [`FlatList`ã§ãƒ‡ãƒ¼ã‚¿ãŒ0ä»¶ã®å ´åˆã«`scrollToEnd`ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹å•é¡Œã®å¯¾å¿œ](#flatlistã§ãƒ‡ãƒ¼ã‚¿ãŒ0ä»¶ã®å ´åˆã«scrolltoendã‚’å®Ÿè¡Œã™ã‚‹ã¨ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹å•é¡Œã®å¯¾å¿œ)
- [Jestã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰å¯¾å¿œ](#jestã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰å¯¾å¿œ)
  - [`jest/__mocks__`é…ä¸‹ã®ãƒ¢ãƒƒã‚¯ãƒ•ã‚¡ã‚¤ãƒ«ã§å®Ÿæ–½ã—ã¦ã„ã‚‹`beforeEach`ã§ã‚¨ãƒ©ãƒ¼](#jest__mocks__é…ä¸‹ã®ãƒ¢ãƒƒã‚¯ãƒ•ã‚¡ã‚¤ãƒ«ã§å®Ÿæ–½ã—ã¦ã„ã‚‹beforeeachã§ã‚¨ãƒ©ãƒ¼)
  - [`@react-native-community/netinfo`ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ†ã‚¹ãƒˆã§ã‚¨ãƒ©ãƒ¼](#react-native-communitynetinfoã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ†ã‚¹ãƒˆã§ã‚¨ãƒ©ãƒ¼)
  - [doneã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ãƒ†ã‚¹ãƒˆã¯éåŒæœŸé–¢æ•°ã«ã§ããªã„](#doneã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ãƒ†ã‚¹ãƒˆã¯éåŒæœŸé–¢æ•°ã«ã§ããªã„)
  - [Fake Timersã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãŒ`modern`ã«å¤‰æ›´](#fake-timersã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãŒmodernã«å¤‰æ›´)
  - [Jestå®Ÿè¡Œæ™‚ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®å¤‰æ›´](#jestå®Ÿè¡Œæ™‚ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®å¤‰æ›´)
- [`npm run android`ã§ã‚¢ãƒ—ãƒªãŒèµ·å‹•ã—ãªã„å•é¡Œã®å¯¾å¿œ](#npm-run-androidã§ã‚¢ãƒ—ãƒªãŒèµ·å‹•ã—ãªã„å•é¡Œã®å¯¾å¿œ)
- [æ‰‹å‹•ç®¡ç†ã—ã¦ã„ã‚‹ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã®æ›´æ–°](#æ‰‹å‹•ç®¡ç†ã—ã¦ã„ã‚‹ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã®æ›´æ–°)
  - [managed-license.jsã®æ›´æ–°](#managed-licensejsã®æ›´æ–°)
  - [ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã®è¡¨è¨˜ã‚†ã‚Œã«å¯¾å¿œ](#ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã®è¡¨è¨˜ã‚†ã‚Œã«å¯¾å¿œ)

ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã‚’å®Ÿæ–½ã—ãŸPull Requestã¯[ã“ã¡ã‚‰](https://github.com/ws-4020/mobile-app-crib-notes/pull/1118)ã§ã™ã€‚

### `@expo/config-plugins`ã‚’`devDependencies`ã«è¿½åŠ 

ã“ã®ã‚¢ãƒ—ãƒªã®ä¾å­˜ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã‚ã‚‹`expo`ã‚„`@react-native-firebase/app`ãªã©ã¯ã€`@expo/config-plugins`ã‚’`dependencies`ã«è¨­å®šã—ã¦ã„ã¾ã™ã€‚
ã“ã‚Œã‚‰ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒè¨­å®šã—ã¦ã„ã‚‹`@expo/config-plugins`ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯æ§˜ã€…ã§ã™ã€‚

- `expo`: `6.0.1`
- `@react-native-firebase/app`: `^5.0.4`

è¤‡æ•°ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒæ··åœ¨ã—ã¦ã„ã‚‹å ´åˆã€`deduped`ãŒç™ºç”Ÿã—`node_modules`é…ä¸‹ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ï¼ˆå¿…è¦ãªç®‡æ‰€ä»¥å¤–ã¯çœç•¥ã—ã¦ã„ã¾ã™ï¼‰ã€‚

```console
node_modules/
â”œâ”€â”€ @expo
â”‚Â Â  â”œâ”€â”€ cli
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ node_modules
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ @expo
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ config-plugins(6.0.1)
â”‚Â Â  â”œâ”€â”€ config-plugins(5.0.4)
â”œâ”€â”€ @react-native-firebase
â”‚Â Â  â”œâ”€â”€ app
```

ã“ã®ã‚¢ãƒ—ãƒªã§ã¯ã€`@expo/cli`ãŒä½¿ç”¨ã™ã‚‹`@expo/config-plugins`ã«ä»¥ä¸‹ã®ãƒ‘ãƒƒãƒã‚’é©ç”¨ã—ã¾ã™ãŒã€`deduped`ãŒç™ºç”Ÿã™ã‚‹ã‹ã©ã†ã‹ã«ã‚ˆã£ã¦ãƒ‘ãƒƒãƒã‚’é©ç”¨ã™ã‚‹ã¹ããƒ‘ã‚¹ãŒå¤‰ã‚ã£ã¦ã—ã¾ã„ã¾ã™ã€‚

- [Expo Config Pluginsã§ã€iOSç”¨ã«è¿½åŠ ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã®IDã‚’å–å¾—ã§ããªã„å•é¡Œã«å¯¾å‡¦ã™ã‚‹ãƒ‘ãƒƒãƒ](https://github.com/{@inject:organization}/mobile-app-crib-notes/blob/master/example-app/SantokuApp/patches/README.md#expo-config-pluginsã§iosç”¨ã«è¿½åŠ ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã®idã‚’å–å¾—ã§ããªã„å•é¡Œã«å¯¾å‡¦ã™ã‚‹ãƒ‘ãƒƒãƒ)

ãã®ãŸã‚ã€`@expo/cli`ãŒä½¿ç”¨ã™ã‚‹`@expo/config-plugins`ã¨åŒã˜ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’`devDependencies`ã«è¿½åŠ ã—ã¦ã€`node_modules`é…ä¸‹ã®æ§‹æˆã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚

```console
node_modules/
â”œâ”€â”€ @expo
â”‚Â Â  â”œâ”€â”€ cli
â”‚Â Â  â”œâ”€â”€ config-plugins(6.0.1)
â”œâ”€â”€ @react-native-firebase
â”‚Â Â  â”œâ”€â”€ app
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ node_modules
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ config-plugins(5.0.4)
```

ã“ã®å¯¾å¿œã«ã‚ˆã‚Šã€ãƒ‘ãƒƒãƒã‚’é©ç”¨ã™ã‚‹ãƒ‘ã‚¹ã¯å¸¸ã«`node_modules/@expo/config-plugins`ã«ãªã‚Šã¾ã™ã€‚

### `jest-expo`ã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰

ä»¥å‰ã¯ã€`expo-cli upgrade`ã‚’ä½¿ç”¨ã—ã¦Expo SDKã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã‚’å®Ÿæ–½ã—ã¦ã„ã¾ã—ãŸã€‚ã—ã‹ã—ã€[Expo SDK 48 - Upgrading your app](https://blog.expo.dev/expo-sdk-48-ccb8302e231#b801)ã‚’ç¢ºèªã™ã‚‹ã¨ã€ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰æ‰‹é †ãŒå¤‰æ›´ã•ã‚Œã¦ã„ã¾ã—ãŸã€‚

```bash
# Expo SDK 47ã¸ã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰æ‰‹é †
expo-cli upgrade

# Expo SDK 48ã¸ã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰æ‰‹é †
npm install expo@^48.0.0
npx expo install --fix
```

ä¸Šè¨˜ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€`expo-cli upgrade`ã§ã¯è‡ªå‹•æ›´æ–°ã•ã‚Œã¦ã„ãŸ`jest-expo`ãŒæ›´æ–°ã•ã‚Œã¾ã›ã‚“ã§ã—ãŸã€‚ãã®ãŸã‚ã€`jest-expo`ã«é–¢ã—ã¦ã¯æ‰‹å‹•ã§`^48.0.0`ã«æ›´æ–°ã—ã¾ã—ãŸã€‚

ãªãŠã€ä¸Šè¨˜äº‹è±¡ã«é–¢ã—ã¦ã¯Expoã®Forumsã«è³ªå•ã‚’æŠ•ç¨¿ã—ã¦ã„ã¾ã™ã€‚

- [Why is jest-expo not updated when I run npx expo install â€“fix?](https://forums.expo.dev/t/why-is-jest-expo-not-updated-when-i-run-npx-expo-install-fix/70965)

### æ—¢å­˜ã®ãƒ‘ãƒƒãƒãƒ•ã‚¡ã‚¤ãƒ«ã®æ›´æ–°

ã“ã®ã‚¢ãƒ—ãƒªã§ã¯ã€[patch-package](https://github.com/ds300/patch-package)ã‚’ä½¿ç”¨ã—ã¦ã€ä»¥ä¸‹ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ãƒ‘ãƒƒãƒãƒ•ã‚¡ã‚¤ãƒ«ã‚’é©ç”¨ã—ã¦ã„ã¾ã—ãŸã€‚ãƒ‘ãƒƒãƒå†…å®¹ã®è©³ç´°ã¯ã€[ã“ã¡ã‚‰](https://github.com/{@inject:organization}/mobile-app-crib-notes/blob/master/example-app/SantokuApp/patches/README.md)ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

- @expo/config-plugins
- expo-splash-screen
- react-native-elements

`@expo/config-plugins`ã®ä»¥ä¸‹ã®ã‚³ãƒŸãƒƒãƒˆã«ã‚ˆã‚‹å¤‰æ›´ã§ã€ãƒ‘ãƒƒãƒãƒ•ã‚¡ã‚¤ãƒ«ãŒé©ç”¨ã§ããªããªã£ã¦ã„ãŸãŸã‚ã€ãƒ‘ãƒƒãƒãƒ•ã‚¡ã‚¤ãƒ«ã‚’å†ä½œæˆã—ã¾ã—ãŸã€‚
å¤‰æ›´ã¯æ”¹è¡Œã®å¢—æ¸›ã®ã¿ã§ã€æ©Ÿèƒ½çš„ãªæ›´æ–°ã¯ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚

- [\[config-plugins\] Rebuild JS files](https://github.com/expo/expo/commit/ee2169270f3207bb4883a3bd9fe1221ef8b94dc2)

`expo-splash-screen`ã¯ã€Expo SDKã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã«ä¼´ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒä¸ŠãŒã‚Šã¾ã—ãŸã€‚ã—ã‹ã—ã€é©ç”¨ã—ã¦ã„ãŸãƒ‘ãƒƒãƒãƒ•ã‚¡ã‚¤ãƒ«ã¯ã¾ã å¿…è¦ãªå¯¾å¿œã ã£ãŸãŸã‚ã€ãƒ‘ãƒƒãƒãƒ•ã‚¡ã‚¤ãƒ«ã¯å‰Šé™¤ã›ãšã«å„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«åˆã‚ã›ã¦ãƒ•ã‚¡ã‚¤ãƒ«åã‚’ãƒªãƒãƒ¼ãƒ ã—ã¾ã—ãŸã€‚

ä¸Šè¨˜ä»¥å¤–ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«é–¢ã—ã¦ã¯ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒå¤‰ã‚ã‚‰ãªã‹ã£ãŸãŸã‚å¤‰æ›´ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

### ExpoãŒç®¡ç†ã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ä¾å­˜ã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®æ›´æ–°

ExpoãŒç®¡ç†ã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®æ›´æ–°ã«ä¼´ã„ã€ä»¥ä¸‹ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æ›´æ–°ã—ã¾ã—ãŸã€‚

| ãƒ©ã‚¤ãƒ–ãƒ©ãƒªå                          | æ›´æ–°å‰       | æ›´æ–°å¾Œ       |
|:--------------------------------|:----------|:----------|
| `@testing-library/react-native` | `18.1.0`  | `18.2.0`  |
| `@types/jest`                   | `<27.0.0` | `<30.0.0` |

### Expoã®æ›´æ–°å±¥æ­´ã®ç¢ºèªã¨å¯¾å¿œ

Expoã®[CHANGELOG](https://github.com/expo/expo/blob/main/CHANGELOG.md#4800--2023-02-09)ã‚’å‚ç…§ã—ã¦ã€Expo SDKã¨ExpoãŒç®¡ç†ã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®æ›´æ–°å†…å®¹ã‚’ç¢ºèªã—ã¾ã—ãŸã€‚

#### `expo-random`ã‹ã‚‰`expo-crypto`ã¸ã®ç§»è¡Œ

[Expo SDK 48ã®ä¸»ãªå¤‰æ›´ - ExpoãŒã‚µãƒãƒ¼ãƒˆã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚„æ©Ÿèƒ½ - éæ¨å¥¨ã¨ãªã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒª](#éæ¨å¥¨ã¨ãªã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒª)ã«è¨˜è¼‰ã—ãŸé€šã‚Šã€`expo-random`ã¯ã€`expo-crypto`ã«çµ±åˆã•ã‚Œã¾ã—ãŸã€‚
ãã®ãŸã‚ã€ä¾å­˜ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‹ã‚‰`expo-random`ã‚’å‰Šé™¤ã—ã¦ã„ã¾ã™ã€‚

ã¾ãŸã€`expo-random`ã‚’ä½¿ç”¨ã—ã¦ã„ãŸç®‡æ‰€ã¯ã€`expo-crypto`ã‚’ä½¿ç”¨ã™ã‚‹ã‚ˆã†ã«å¤‰æ›´ã—ã¦ã„ã¾ã™ã€‚

```typescript
// ä¿®æ­£å‰
import * as Random from 'expo-random';
// ä¿®æ­£å¾Œ
import * as Crypto from 'expo-crypto';
```

#### `expo-keep-awake`ã®`activateKeepAwake`ãŒéæ¨å¥¨ã«ãªã£ãŸã“ã¨ã¸ã®å¯¾å¿œ

<!-- textlint-disable ja-technical-writing/sentence-length -->
[Expo SDK 48ã®ä¸»ãªå¤‰æ›´ - ExpoãŒã‚µãƒãƒ¼ãƒˆã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚„æ©Ÿèƒ½ - expo-keep-awake](#expo-keep-awake)ã«è¨˜è¼‰ã—ãŸé€šã‚Šã€`expo-keep-awake`ã®`activateKeepAwake`ãŒéæ¨å¥¨ã«ãªã‚Šã¾ã—ãŸã€‚ãã®ãŸã‚ã€`activateKeepAwakeAsync`ã‚’ä½¿ç”¨ã™ã‚‹ã‚ˆã†ã«å¤‰æ›´ã—ã¦ã„ã¾ã™ã€‚
<!-- textlint-enable ja-technical-writing/sentence-length -->

```typescript
// ä¿®æ­£å‰
await activateKeepAwake();
// ä¿®æ­£å¾Œ
await activateKeepAwakeAsync();
```

#### `@react-native-community/datetimepicker`ã®ä¸€éƒ¨ã®é …ç›®ãŒéæ¨å¥¨ã«ãªã£ãŸã“ã¨ã¸ã®å¯¾å¿œ

<!-- textlint-disable ja-technical-writing/sentence-length -->
[Expo SDK 48ã®ä¸»ãªå¤‰æ›´ - ExpoãŒã‚µãƒãƒ¼ãƒˆã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚„æ©Ÿèƒ½ - @react-native-community/datetimepicker](#react-native-communitydatetimepicker)ã«è¨˜è¼‰ã—ãŸé€šã‚Šã€`@react-native-community/datetimepicker`ã®ä¸€éƒ¨ã®é …ç›®ãŒéæ¨å¥¨ã«ãªã£ã¦ã„ã¾ã™ã€‚
<!-- textlint-enable ja-technical-writing/sentence-length -->

ã“ã®ã‚¢ãƒ—ãƒªã§ã¯`neutralButtonLabel`ã‚’ä½¿ç”¨ã—ã¦ã„ãŸãŸã‚ã€ä»¥ä¸‹ã®ã‚ˆã†ã«å¤‰æ›´ã—ã¦ã„ã¾ã™ã€‚

```typescript jsx
// ä¿®æ­£å‰
pickerItemsProps={{neutralButtonLabel: m('æ¶ˆå»')}}
// ä¿®æ­£å¾Œ
pickerItemsProps={{neutralButton: {label: m('æ¶ˆå»')}}}
```

### React Nativeã®æ›´æ–°å±¥æ­´ã®ç¢ºèªã¨å¯¾å¿œ

React Nativeã®[CHANGELOG](https://github.com/facebook/react-native/blob/main/CHANGELOG.md#v0716)ã‚’å‚ç…§ã—ã¦ã€React Nativeã®æ›´æ–°å†…å®¹ã‚’ç¢ºèªã—ã¾ã—ãŸã€‚

#### `@types/react-native`ã‚’ä¾å­˜ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‹ã‚‰å‰Šé™¤

[Expo SDK 48ã®ä¸»ãªå¤‰æ›´ - React Native 0.71.6 and React 18.2.0](#react-native-0716-and-react-1820)ã«è¨˜è¼‰ã—ãŸé€šã‚Šã€`react-native`ã«å‹å®šç¾©ãŒå«ã¾ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚
ãã®ãŸã‚ã€ä¾å­˜ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‹ã‚‰`@types/react-native`ã‚’å‰Šé™¤ã—ã¦ã„ã¾ã™ã€‚

ä¸Šè¨˜å¯¾å¿œã‚’ã—ãŸã¨ã“ã‚ã€[OverlayBackdrop.tsx](https://github.com/{@inject:organization}/mobile-app-crib-notes/blob/v2023.03/example-app/SantokuApp/src/bases/ui/overlay/OverlayBackdrop.tsx#L3)ã§ä»¥ä¸‹ã®å‹ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚

> TS2305: Module '"react-native"' has no exported member 'Omit'

`Omit`ã‚’`typescript`ã‹ã‚‰ã§ã¯ãªãã€`react-native`ã‹ã‚‰importã—ã¦ã„ãŸãŸã‚ã§ã™ã€‚
ã“ã‚Œã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«`react-native`ã‹ã‚‰ã®importã‚’å‰Šé™¤ã—ã¦ã€`typescript`ã§å®šç¾©ã•ã‚Œã¦ã„ã‚‹å‹å®šç¾©ã‚’å‚ç…§ã™ã‚‹ã‚ˆã†ã«ä¿®æ­£ã—ã¾ã—ãŸã€‚

```typescript title=OverlayBackdrop.tsx
// ä¿®æ­£å‰
import {Omit, Pressable, PressableProps, StyleSheet, View, ViewProps} from 'react-native';
// ä¿®æ­£å¾Œ
import {Pressable, PressableProps, StyleSheet, View, ViewProps} from 'react-native';
```

### expo-template-blank-typescriptã®æ›´æ–°å±¥æ­´ã®ç¢ºèªã¨å¯¾å¿œ

<!-- textlint-disable ja-technical-writing/sentence-length -->
[expo-template-blank-typescriptã®æ›´æ–°å±¥æ­´](https://github.com/expo/expo/commits/sdk-48/templates/expo-template-blank-typescript)ã‚’ç¢ºèªã—ã¾ã—ãŸã€‚
<!-- textlint-enable ja-technical-writing/sentence-length -->

`npm install expo@^48.0.0`ã€`npx expo install --fix`ã§æ›´æ–°ã•ã‚Œã‚‹ä¾å­˜ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ãŒä¸»ãªå¤‰æ›´ã§ã—ãŸã€‚ãã®ãŸã‚ã€ã“ã®ã‚¢ãƒ—ãƒªã§ç‰¹åˆ¥ãªå¯¾å¿œã¯å¿…è¦ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚

### expo-template-bare-minimumã®æ›´æ–°å±¥æ­´ã®ç¢ºèªã¨å¯¾å¿œ

[expo-template-bare-minimumã®æ›´æ–°å±¥æ­´](https://github.com/expo/expo/commits/sdk-48/templates/expo-template-bare-minimum)ã‚’ç¢ºèªã—ã¾ã—ãŸã€‚

ã“ã®ã‚¢ãƒ—ãƒªã§ã¯[Config Pluginsã«å¯¾å¿œ](./config-plugins.mdx)ã—ã¦ã„ã‚‹ã®ã§ã€`expo-template-bare-minimum`ã®æ›´æ–°ã«ä¼´ã†å€‹åˆ¥ã®å¯¾å¿œã¯åŸºæœ¬çš„ã«å¿…è¦ã‚ã‚Šã¾ã›ã‚“ã€‚
ãŸã ã—ã€ä»¥ä¸‹ã®å ´åˆã¯å€‹åˆ¥ã«å¯¾å¿œã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

- ã“ã®ã‚¢ãƒ—ãƒªã§ä½œæˆã—ã¦ã„ã‚‹Config Pluginsã«ã‚ˆã‚‹å¤‰æ›´ã¨ã€`expo-template-bare-minimum`ã®æ›´æ–°ã«ä¼´ã†å¤‰æ›´ãŒç«¶åˆã—ãŸå ´åˆ
- [Prebuild](../../development/build-configuration#prebuild)æ™‚ã«ç”Ÿæˆã•ã‚Œãªã„ãƒ•ã‚¡ã‚¤ãƒ«

ä¸Šè¨˜å†…å®¹ã‚’è¦³ç‚¹ã«`expo-template-bare-minimum`ã®æ›´æ–°å±¥æ­´ã‚’ç¢ºèªã—ã¾ã—ãŸã€‚

#### `.buckconfig`ã®å‰Šé™¤ã¨`.gitignore`ã®æ›´æ–°

`expo-template-bare-minimum`ã®ä»¥ä¸‹ã®ã‚³ãƒŸãƒƒãƒˆã§ã€`.buckconfig`ãŒå‰Šé™¤ã•ã‚Œã€`.gitignore`ãŒæ›´æ–°ã•ã‚Œã¦ã„ã¾ã—ãŸã€‚

- [upgrade react-native 0.71](https://github.com/expo/expo/commit/84f418d73be6d8683992cefbe4fc26d1f40eaaa4)

ã“ã®ã‚¢ãƒ—ãƒªã§ä¿®æ­£ã—ãŸ`.gitignore`ã®diffã¯ä»¥ä¸‹ã«ãªã‚Šã¾ã™ã€‚

```diff title=.gitignore
 local.properties
 *.iml
 *.hprof
+*.keystore
+!debug.keystore

 # node.js
 #
@@ -37,12 +39,6 @@ node_modules/
 npm-debug.log
 yarn-error.log

-# BUCK
-buck-out/
-\.buckd/
-*.keystore
-!debug.keystore
-
 # Bundle artifacts
 *.jsbundle

@@ -50,6 +46,9 @@ buck-out/
 /.bundle/vendor
 /ios/Pods/

+# Temporary files created by Metro to check the health of the file watcher
+.metro-health-check*
+
 # Expo
 .expo/
 web-build/
```

### JavaScriptã®ã‚¨ãƒ³ã‚¸ãƒ³ã‚’Hermesã«å¤‰æ›´

<!-- textlint-disable ja-technical-writing/sentence-length, ja-technical-writing/no-doubled-joshi -->
[Expo SDK 48ã®ä¸»ãªå¤‰æ›´ - JavaScriptã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¨ãƒ³ã‚¸ãƒ³ã‚’Hermesã«å¤‰æ›´](#javascriptã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¨ãƒ³ã‚¸ãƒ³ã‚’hermesã«å¤‰æ›´)ã«è¨˜è¼‰ã—ãŸé€šã‚Šã€Expo SDK 48ã‹ã‚‰ã¯`Hermes`ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®JavaScriptã‚¨ãƒ³ã‚¸ãƒ³ã«ãªã‚Šã¾ã—ãŸã€‚
<!-- textlint-enable ja-technical-writing/sentence-length, ja-technical-writing/no-doubled-joshi -->

ãã®ãŸã‚ã€ã“ã®ã‚¢ãƒ—ãƒªã‚‚JavaScriptã®ã‚¨ãƒ³ã‚¸ãƒ³ã‚’`Hermes`ã«å¤‰æ›´ã—ã¦ã„ã¾ã™ã€‚

```javascript title=app.config.js
// ä¿®æ­£å‰
jsEngine: 'jsc'
// ä¿®æ­£å¾Œ
jsEngine: 'hermes'
```

ãªãŠã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãŒ`Hermes`ãªã®ã§ã‚ãˆã¦`jsEngine`ã‚’æŒ‡å®šã™ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ã“ã®ã‚¢ãƒ—ãƒªã§ã¯ä½¿ç”¨ã—ã¦ã„ã‚‹JavaScriptã‚¨ãƒ³ã‚¸ãƒ³ã‚’æ˜ç¤ºã™ã‚‹ãŸã‚ã«ã€`jsEngine`ã‚’è¨­å®šã—ã¦ã„ã¾ã™ã€‚

### `FlatList`ã§ãƒ‡ãƒ¼ã‚¿ãŒ0ä»¶ã®å ´åˆã«`scrollToEnd`ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹å•é¡Œã®å¯¾å¿œ

`react-native`ã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã«ä¼´ã„ã€FlatListã§ãƒ‡ãƒ¼ã‚¿ãŒ0ä»¶ã®å ´åˆã«`scrollToEnd`ã‚’å®Ÿè¡Œã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚

> ERROR  Invariant Violation: Tried to get frame for out of range index -1, js engine: hermes

ã“ã®å•é¡Œã«å¯¾ã™ã‚‹issueã¨Pull Requestã¯ä»¥ä¸‹ã«ãªã‚Šã¾ã™ã€‚

- [scrollToEnd fails on empty FlatList jest](https://github.com/facebook/react-native/issues/36066)
- [fix: fix virtualizedList scrollToEnd for 0 items](https://github.com/facebook/react-native/pull/36067)

Pull Requestã¯æ—¢ã«ã‚¯ãƒ­ãƒ¼ã‚ºã•ã‚Œ`main`ãƒ–ãƒ©ãƒ³ãƒã«ã¯ãƒãƒ¼ã‚¸ã•ã‚Œã¦ã„ã¾ã™ãŒã€`react-native`ã®`0.71.6`ã«ã¯å«ã¾ã‚Œã¦ã„ã¾ã›ã‚“ã€‚
ãã®ãŸã‚ã€[patch-package](https://github.com/ds300/patch-package)ã‚’ä½¿ç”¨ã—ã¦ã€Pull Requestã§å¯¾å¿œã•ã‚Œã¦ã„ã‚‹å†…å®¹ã‚’å«ã‚“ã ãƒ‘ãƒƒãƒãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã—ãŸã€‚

### Jestã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰å¯¾å¿œ

Jestã¯26ç³»ã‹ã‚‰29ç³»ã«ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã•ã‚Œã€ãƒ¡ã‚¸ãƒ£ãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒ3ã¤ã‚‚ä¸ŠãŒã‚Šã¾ã—ãŸã€‚
ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ†ã‚¹ãƒˆãƒ©ãƒ³ãƒŠãƒ¼ãŒ[jest-jasmine2](https://github.com/jestjs/jest/tree/main/packages/jest-jasmine2)ã‹ã‚‰[jest-circus](https://github.com/jestjs/jest/tree/main/packages/jest-circus)ã«å¤‰æ›´ã•ã‚Œã‚‹ãªã©ã€æ›´æ–°å†…å®¹ã¯å¤šå²ã«ã‚ãŸã‚Šã¾ã™ã€‚

æ›´æ–°å†…å®¹ã®è©³ç´°ã¯ä»¥ä¸‹ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

- [CHANGELOG](https://github.com/jestjs/jest/blob/main/CHANGELOG.md#2950)

ã“ã®ã‚¢ãƒ—ãƒªã§ã¯ã€ã„ãã¤ã‹ã®è‡ªå‹•ãƒ†ã‚¹ãƒˆãŒå¤±æ•—ã™ã‚‹ãªã©ä¿®æ­£ã‚’å¿…è¦ã¨ã™ã‚‹ç®‡æ‰€ãŒã‚ã‚Šã¾ã—ãŸã€‚

#### `jest/__mocks__`é…ä¸‹ã®ãƒ¢ãƒƒã‚¯ãƒ•ã‚¡ã‚¤ãƒ«ã§å®Ÿæ–½ã—ã¦ã„ã‚‹`beforeEach`ã§ã‚¨ãƒ©ãƒ¼

ä¸€éƒ¨ã®ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ãŸã¨ã“ã‚ä»¥ä¸‹ã®ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚`jest/__mocks__`é…ä¸‹ã®ãƒ¢ãƒƒã‚¯ãƒ•ã‚¡ã‚¤ãƒ«ã§å®Ÿè¡Œã—ã¦ã„ã‚‹`beforeEach`ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¦ã„ã¾ã™ã€‚

> Error: Hooks cannot be defined inside tests. Hook of type "beforeEach" is nested within

`jest/__mocks__`é…ä¸‹ã®ãƒ¢ãƒƒã‚¯ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã€ãƒ¢ãƒƒã‚¯ã—ã¦ã„ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãªã©ãŒ`import`ã€`require`ã•ã‚ŒãŸã¨ãã«èª­ã¿è¾¼ã¾ã‚Œã¾ã™ã€‚
ã“ã®ã‚¢ãƒ—ãƒªã®ä¸€éƒ¨ã®ãƒ†ã‚¹ãƒˆã§ã¯ã€ãƒ†ã‚¹ãƒˆå¯¾è±¡ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å†…éƒ¨ã§ã€æ¡ä»¶ã«ã‚ˆã£ã¦`require`ã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’åˆ‡ã‚Šæ›¿ãˆã¦ã„ã¾ã™ã€‚
ãã‚ŒãŒåŸå› ã§ã“ã®ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸã¨è€ƒãˆã‚‰ã‚Œã¾ã™ã€‚

ã“ã®å•é¡Œã¯ã€Expo SDK 48ã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã®éç¨‹ã§æ¤œå‡ºã—ãŸå•é¡Œã§ã™ãŒã€ä»¥å‰ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã‚‚æœŸå¾…é€šã‚Šã®å‹•ä½œã«ã¯ãªã£ã¦ã„ã¾ã›ã‚“ã§ã—ãŸï¼ˆã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã¨ã—ã¦å‡ºåŠ›ã•ã‚Œã¦ã„ãªã„ã ã‘ã§ã—ãŸï¼‰ã€‚

ãã®ãŸã‚ã€Expo SDK 48ã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã«é–¢ã™ã‚‹Pull Requestã§ã¯ãªãã€ä»¥ä¸‹ã®Pull Requestã§åˆ¥é€”å¯¾å¿œã—ã¾ã—ãŸã€‚

- [ğŸ©¹: Jestã§ãƒ†ã‚¹ãƒˆå®Ÿæ–½å‰ã®ãƒ¢ãƒƒã‚¯ã‚¯ãƒªã‚¢æ–¹æ³•ã‚’ä¿®æ­£](https://github.com/ws-4020/mobile-app-crib-notes/pull/1125)

#### `@react-native-community/netinfo`ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ†ã‚¹ãƒˆã§ã‚¨ãƒ©ãƒ¼

`@react-native-community/netinfo`ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ†ã‚¹ãƒˆã§ä»¥ä¸‹ã®ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚

```console
Cannot read properties of undefined (reading 'isInternetReachable')
TypeError: Cannot read properties of undefined (reading 'isInternetReachable')
at InternetReachability.isInternetReachable [as update] (~/dev/src/github.com/ws-4020/mobile-app-crib-notes-expo-48/example-app/SantokuApp/node_modules/@react-native-community/netinfo/lib/commonjs/internal/internetReachability.ts:148:20)
at State.update (~/dev/src/github.com/ws-4020/mobile-app-crib-notes-expo-48/example-app/SantokuApp/node_modules/@react-native-community/netinfo/lib/commonjs/internal/state.ts:74:32)
at Generator.next (<anonymous>)
at asyncGeneratorStep (~/dev/src/github.com/ws-4020/mobile-app-crib-notes-expo-48/example-app/SantokuApp/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:24)
at _next (~/dev/src/github.com/ws-4020/mobile-app-crib-notes-expo-48/example-app/SantokuApp/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:9)
```

å¯¾å¿œã¨ã—ã¦ã¯`@react-native-community/netinfo`ã‚’ãƒ¢ãƒƒã‚¯åŒ–ã™ã‚‹Jestã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã€ãã‚Œã‚’`jest.config.js`ã«è¨­å®šã—ã¾ã—ãŸã€‚

```javascript title="jest/setup/netinfo.js"
import mockRNCNetInfo from '@react-native-community/netinfo/jest/netinfo-mock.js';

jest.mock('@react-native-community/netinfo', () => mockRNCNetInfo);
```

```javascript title="jest.config.js"
/* ï½çœç•¥ï½ */
  setupFiles: [
    '<rootDir>/jest/setup/global.js',
    '<rootDir>/jest/setup/netinfo.js', // <- è¿½åŠ 
/* ï½çœç•¥ï½ */
```

#### doneã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ãƒ†ã‚¹ãƒˆã¯éåŒæœŸé–¢æ•°ã«ã§ããªã„

Jest27ä»¥é™ã§ã¯ã€`done`ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ãƒ†ã‚¹ãƒˆã§`async`/`await`ã‚’ä½¿ç”¨ã—ãŸéåŒæœŸé–¢æ•°ã‚’ä½¿ç”¨ã§ãã¾ã›ã‚“ã€‚

```typescript
// <- doneã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã¯ã€asyncã‚’ä»˜ã‘ã‚Œãªã„
it('200msçµŒã£ã¦ã‹ã‚‰ã‚¹ãƒ—ãƒ©ãƒƒã‚·ãƒ¥ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãŒé–‰ã˜ã‚‰ã‚Œã‚‹ã“ã¨', async done => {})
```

ä¸€éƒ¨ã®ãƒ†ã‚¹ãƒˆã§ã¯ã€`async`/`await`ã¨doneã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚’ä½µç”¨ã—ã¦ã„ãŸãŸã‚ã€ãã®ãƒ†ã‚¹ãƒˆã§ã¯`done`ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚’ä½¿ç”¨ã—ãªã„ã‚ˆã†ã«ä¿®æ­£ã—ã¾ã—ãŸã€‚

#### Fake Timersã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãŒ`modern`ã«å¤‰æ›´

Jest27ä»¥é™ã§ã¯ã€Fake Timersã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãŒ`modern`ã«å¤‰æ›´ã•ã‚Œã¾ã—ãŸã€‚ä½µã›ã¦ã€`jest.useFakeTimers`ã®å¼•æ•°ã«`modern`ã‚’è¨­å®šã§ããªããªã‚Šã¾ã—ãŸã€‚

ãã®ãŸã‚ã€`modern`ãªFake Timersã‚’ä½¿ç”¨ã—ã¦ã„ãŸç®‡æ‰€ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ä¿®æ­£ã—ã¦ã„ã¾ã™ã€‚

```typescript
// ä¿®æ­£å‰
jest.useFakeTimers('modern');
// ä¿®æ­£å¾Œ
jest.useFakeTimers();
```

ãªãŠã€`legacy`ãªFake Timersã‚’ä½¿ç”¨ã—ãŸã„å ´åˆã¯`jest.useFakeTimers({legacyFakeTimers: true})`ã®ã‚ˆã†ã«ã—ã¾ã™ã€‚

#### Jestå®Ÿè¡Œæ™‚ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®å¤‰æ›´

`@mswjs/data`ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ†ã‚¹ãƒˆã§ä»¥ä¸‹ã®ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚

```console
Jest has detected the following 3 open handles potentially keeping Jest from exiting:

  â—  MESSAGEPORT

       9 |
      10 | export const initialDb = () => {
    > 11 |   db = factory(models);
         |               ^
      12 |   maxDb = factory(models);
      13 |   minDb = factory(models);
      14 | };

      at Object.sync (node_modules/@mswjs/data/lib/extensions/sync.js:74:19)
      at factory (node_modules/@mswjs/data/lib/factory.js:50:12)
      at initialDb (src/fixtures/msw/db.ts:11:15)
      at Object.<anonymous> (src/apps/app/App.test.tsx:17:12)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:24)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:27:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:19:12)
```

èª¿æŸ»ã—ã¦è¦‹ã‚‹ã¨ã€`@mswjs/data`ã®å†…éƒ¨ã§ä½¿ç”¨ã—ã¦ã„ã‚‹[BroadcastChannel](https://developer.mozilla.org/ja/docs/Web/API/Broadcast_Channel_API)ãŒã‚¯ãƒ­ãƒ¼ã‚ºã•ã‚Œã¦ã„ãªã„ã“ã¨ãŒåŸå› ã§ã—ãŸã€‚
è©²å½“ç®‡æ‰€ã¯[ã“ã¡ã‚‰](https://github.com/mswjs/data/blob/v0.11.2/src/extensions/sync.ts#L72)ã§ã™ã€‚

ã“ã‚Œã¯ã€Jestå®Ÿè¡Œæ™‚ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¨ã—ã¦[--detectOpenHandles](https://jestjs.io/ja/docs/cli#--detectopenhandles)ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã§æ¤œå‡ºã§ãã‚‹å•é¡Œã§ã™ã€‚`--detectOpenHandles`ã¯ã€ã‚¯ãƒ­ãƒ¼ã‚ºã•ã‚Œã¦ã„ãªã„ãƒªã‚½ãƒ¼ã‚¹ã‚’æ¤œå‡ºã—ã¦ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«å‡ºåŠ›ã™ã‚‹ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã™ã€‚

Jestã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ã¯`--detectOpenHandles`ã®èª¬æ˜ã¨ã—ã¦ä»¥ä¸‹ã‚‚è¨˜è¼‰ã•ã‚Œã¦ã„ã¾ã™ã€‚

> ã“ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«ã¯é‡å¤§ãªãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®ä½ä¸‹ãŒã‚ã‚Šã€ãƒ‡ãƒãƒƒã‚°ã«ã®ã¿ä½¿ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

ãã®ãŸã‚ã€CIç’°å¢ƒã‚„`npm run test`å®Ÿè¡Œæ™‚ã«ã¯`--detectOpenHandles`ã‚’æŒ‡å®šã—ãªã„æ–¹ãŒè‰¯ã„ã¨ã„ã†æ„è¦‹ãŒæŒ™ãŒã‚Šã¾ã—ãŸã€‚ã¾ãŸã€ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªã«ãŠã„ã¦ã¯ã€ä»¥ä¸‹ã®ç†ç”±ã«ã‚ˆã‚Šãƒªã‚½ãƒ¼ã‚¹ã®ã‚¯ãƒ­ãƒ¼ã‚ºæ¼ã‚ŒãŒã‚µãƒ¼ãƒã‚µã‚¤ãƒ‰ç¨‹ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«ãªå•é¡Œã«ã¯ãªã‚‰ãªã„ã¨ã„ã†æ„è¦‹ã‚‚ã‚ã‚Šã¾ã—ãŸã€‚

- ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªã¯ä½¿ç”¨è€…ã®ç«¯æœ«ã§å‹•ä½œã™ã‚‹ãŸã‚ã€ãƒªã‚½ãƒ¼ã‚¹ã®ã‚¯ãƒ­ãƒ¼ã‚ºæ¼ã‚Œã«ã‚ˆã‚‹å½±éŸ¿ãŒã‚µãƒ¼ãƒã‚µã‚¤ãƒ‰ã¨æ¯”è¼ƒã—ã¦å°ã•ã„
- ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªã¯åœæ­¢ã€ã¾ãŸã¯å†èµ·å‹•ãŒæ¯”è¼ƒçš„é »ç¹ã«è¡Œã‚ã‚Œã‚‹ã®ã§ã€ãƒªã‚½ãƒ¼ã‚¹ã®ã‚¯ãƒ­ãƒ¼ã‚ºæ¼ã‚ŒãŒé•·æ™‚é–“ç¶™ç¶šã™ã‚‹ã“ã¨ã¯å°‘ãªã„

ä¸Šè¨˜ç†ç”±ã«ã‚ˆã‚Šã€ã“ã®ã‚¢ãƒ—ãƒªã§ã¯`--detectOpenHandles`ã‚’æŒ‡å®šã—ãªã„ã“ã¨ã«ã—ã¾ã—ãŸã€‚

ã¾ãŸã€Jestã¯ãƒªã‚½ãƒ¼ã‚¹ãŒã‚¯ãƒ­ãƒ¼ã‚ºã•ã‚Œã¦ã„ãªã„å ´åˆã«ãƒ—ãƒ­ã‚»ã‚¹ãŒçµ‚äº†ã—ã¾ã›ã‚“ã€‚ãã®ãŸã‚ã€[--forceExit](https://jestjs.io/ja/docs/cli#--forceexit)ã‚’æŒ‡å®šã—ã¦ã€Jestã‚’å¼·åˆ¶çµ‚äº†ã™ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚

```json title=package.json
{
  /* ï½çœç•¥ï½ */
  "scripts": {
    /* ï½çœç•¥ï½ */
    "test": "jest --runInBand --forceExit",
    "test:coverage": "jest --runInBand --forceExit --coverage",
    "test:report": "jest --runInBand --forceExit --reporters=default --reporters=jest-junit --coverage",
    /* ï½çœç•¥ï½ */
  }
}
```

ãªãŠã€ä»Šå›ã®æ¤œè¨ã‚’ã™ã‚‹åŸå› ã¨ãªã£ãŸ`@mswjs/data`ã®ã‚¯ãƒ­ãƒ¼ã‚ºæ¼ã‚Œã«ã¤ã„ã¦ã¯ã€`@mswjs/data`ã‚’ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ã§ä½¿ç”¨ã™ã‚‹å¯èƒ½æ€§ãŒã»ã¨ã‚“ã©ãªã„ã“ã¨ã‹ã‚‰ã€ç‰¹ã«å¯¾å¿œã¯ã—ã¦ã„ã¾ã›ã‚“ã€‚

### `npm run android`ã§ã‚¢ãƒ—ãƒªãŒèµ·å‹•ã—ãªã„å•é¡Œã®å¯¾å¿œ

Expo SDK 48ã«ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰å¾Œã€`npm run android`ã‚’å®Ÿè¡Œã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¦ã‚¢ãƒ—ãƒªãŒèµ·å‹•ã—ã¾ã›ã‚“ã§ã—ãŸã€‚
Androidã®APIãƒ¬ãƒ™ãƒ«ãŒ33ã®å ´åˆã«ç™ºç”Ÿã™ã‚‹å•é¡Œã®ã‚ˆã†ã§ã™ï¼ˆAPIãƒ¬ãƒ™ãƒ«ãŒ32ã®ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ã§ç¢ºèªã—ãŸã¨ã“ã‚ã€å•é¡Œãªãèµ·å‹•ã§ãã¾ã—ãŸï¼‰ã€‚

```console
â€º Opening jp.fintan.mobile.SantokuApp.local/.MainActivity on Pixel_3a_API_33
CommandError: Couldn't open Android app with activity "jp.fintan.mobile.SantokuApp.local/.MainActivity" on device "Pixel_3a_API_33".
The app might not be installed, try installing it with: npx expo run:android -d Pixel_3a_API_33
Activity class {jp.fintan.mobile.SantokuApp.local/jp.fintan.mobile.SantokuApp.local.MainActivity} does not exist.
```

ã‚¢ãƒ—ãƒªã®ãƒ“ãƒ«ãƒ‰ã¯æˆåŠŸã—ã€ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ã«ã¯ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€ã“ã®ã‚¢ãƒ—ãƒªã§ã¯ä»¥ä¸‹ã®é‹ç”¨ã§å›é¿ã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚

- ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚ŒãŸã‚¢ãƒ—ãƒªã‚’æ‰‹å‹•ã§èµ·å‹•
- `npm start`ã‚’å®Ÿè¡Œã—ã¦Metroã‚’èµ·å‹•

ãªãŠã€ã“ã®å•é¡Œã¯ä»¥ä¸‹ã®issueã§Expoã«å ±å‘Šã—ã¦ã„ã¾ã™ã€‚

- [\[Android13\] Couldn't open Android app with app created using expo-template-bare-minimum](https://github.com/expo/expo/issues/22210)

### æ‰‹å‹•ç®¡ç†ã—ã¦ã„ã‚‹ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã®æ›´æ–°

ã“ã®ã‚¢ãƒ—ãƒªã§ã¯ã€ä½¿ç”¨ã—ã¦ã„ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ä¸€è¦§ã‚’å‡ºåŠ›ã™ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ç”¨æ„ã—ã¦ã„ã¾ã™ã€‚è©³ç´°ã¯ã€[ã“ã¡ã‚‰](https://github.com/{@inject:organization}/mobile-app-crib-notes/blob/master/example-app/SantokuApp/.script/README.md)ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

#### managed-license.jsã®æ›´æ–°

ãƒ©ã‚¤ã‚»ãƒ³ã‚¹æƒ…å ±ãŒä¸è¶³ã—ã¦ã„ãŸã‚Šã€é–‹ç™ºæ™‚ã®ã¿ä½¿ç”¨ã™ã‚‹ãŸã‚é™¤å¤–ã—ãŸã„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’[managed-license.js](https://github.com/{@inject:organization}/mobile-app-crib-notes/blob/master/example-app/SantokuApp/.script/managed-license.js)ã§ç®¡ç†ã—ã¦ã„ã¾ã™ã€‚

ãƒ©ã‚¤ã‚»ãƒ³ã‚¹æƒ…å ±ãŒä¸è¶³ã—ã¦ã„ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãªã©ã¯ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã§ç¢ºèªã§ãã¾ã™ã€‚

- `node .script/check-licenses.js`

å®Ÿè¡Œã—ãŸçµæœã€ã„ãã¤ã‹ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒ©ã‚¤ã‚»ãƒ³ã‚¹æƒ…å ±ã‚’æ›´æ–°ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã—ãŸã€‚
ã¾ãŸã€JavaScriptã®ã‚¨ãƒ³ã‚¸ãƒ³ã‚’`Hermes`ã«å¤‰ãˆãŸã“ã¨ã§ã€æ˜ç¤ºçš„ã«é™¤å¤–ã—ã¦ã„ãŸAndroid JSCã®ãƒ©ã‚¤ã‚»ãƒ³ã‚¹è¨­å®šã‚‚ä¸è¦ã«ãªã£ãŸã®ã§ã€`managed-license.js`ã‹ã‚‰å‰Šé™¤ã—ã¾ã—ãŸã€‚

#### ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã®è¡¨è¨˜ã‚†ã‚Œã«å¯¾å¿œ

ã“ã®ã‚¢ãƒ—ãƒªã§ã¯ã€ã‚¢ãƒ—ãƒªã«è¡¨ç¤ºã™ã‚‹ãƒ©ã‚¤ã‚»ãƒ³ã‚¹åã‚’[SPDX](https://spdx.org/licenses/)ã«åˆã‚ã›ã¦ã„ã¾ã™ã€‚

ä»Šå›ã®Expo SDKã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã§ã¯ã€ä¸€éƒ¨ã®ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã§SPDXã«å®šç¾©ã•ã‚Œã¦ã„ãªã„ãƒ©ã‚¤ã‚»ãƒ³ã‚¹åã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒã‚ã‚Šã¾ã—ãŸã€‚
ãã®ãƒ©ã‚¤ã‚»ãƒ³ã‚¹åï¼ˆ`BSD 3-Clause`ï¼‰ã‚’[list-dependencies.js](https://github.com/{@inject:organization}/mobile-app-crib-notes/blob/master/example-app/SantokuApp/.script/list-dependencies.js)ã«è¿½åŠ ã—ã¦ã„ã¾ã™ã€‚

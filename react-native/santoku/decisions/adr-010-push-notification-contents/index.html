<!doctype html>
<html lang="ja" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-react-native/santoku/decisions/adr-010-push-notification-contents" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">プッシュ通知の内容に関する方針 | Fintan » Mobile App Development</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://fintan-contents.github.io/mobile-app-crib-notes/react-native/santoku/decisions/adr-010-push-notification-contents"><meta data-rh="true" name="docusaurus_locale" content="ja"><meta data-rh="true" name="docsearch:language" content="ja"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="プッシュ通知の内容に関する方針 | Fintan » Mobile App Development"><meta data-rh="true" name="description" content="Status: Accepted"><meta data-rh="true" property="og:description" content="Status: Accepted"><link data-rh="true" rel="icon" href="/mobile-app-crib-notes/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://fintan-contents.github.io/mobile-app-crib-notes/react-native/santoku/decisions/adr-010-push-notification-contents"><link data-rh="true" rel="alternate" href="https://fintan-contents.github.io/mobile-app-crib-notes/react-native/santoku/decisions/adr-010-push-notification-contents" hreflang="ja"><link data-rh="true" rel="alternate" href="https://fintan-contents.github.io/mobile-app-crib-notes/react-native/santoku/decisions/adr-010-push-notification-contents" hreflang="x-default"><script src="https://plausible.io/js/script.js" defer="defer" data-domain="fintan-contents.github.io,all.fintan"></script><link rel="stylesheet" href="/mobile-app-crib-notes/assets/css/styles.b068789d.css">
<link rel="preload" href="/mobile-app-crib-notes/assets/js/runtime~main.c82dcb28.js" as="script">
<link rel="preload" href="/mobile-app-crib-notes/assets/js/main.1abe714a.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="メインコンテンツまでスキップ"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">メインコンテンツまでスキップ</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://fintan.jp" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/mobile-app-crib-notes/img/fintan-logo.jpg" alt="Fintan Mobile App" class="themedImage_ToTc themedImage--light_HNdA"><img src="/mobile-app-crib-notes/img/fintan-logo.jpg" alt="Fintan Mobile App" class="themedImage_ToTc themedImage--dark_i4oU"></div></a><a class="navbar__item navbar__link" href="/mobile-app-crib-notes/">Home</a><a class="navbar__item navbar__link" href="/mobile-app-crib-notes/reference">Reference</a><a class="navbar__item navbar__link" href="/mobile-app-crib-notes/distribution">Distribution</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">React Native</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/mobile-app-crib-notes/react-native/learn">Learn</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/mobile-app-crib-notes/react-native/santoku">Example App</a></li><li><a class="dropdown__link" href="/mobile-app-crib-notes/react-native/common-pitfalls">Trouble shooting</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://github.com/fintan-contents/mobile-app-crib-notes" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="先頭へ戻る" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a href="https://fintan.jp" target="_blank" rel="noopener noreferrer" tabindex="-1" class="sidebarLogo_isFc"><img src="/mobile-app-crib-notes/img/fintan-logo.jpg" alt="Fintan Mobile App" class="themedImage_ToTc themedImage--light_HNdA"><img src="/mobile-app-crib-notes/img/fintan-logo.jpg" alt="Fintan Mobile App" class="themedImage_ToTc themedImage--dark_i4oU"></a><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/mobile-app-crib-notes/react-native/santoku">はじめに</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/mobile-app-crib-notes/react-native/santoku/requirements">Requirements</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/mobile-app-crib-notes/react-native/santoku/application-architecture">Application Architecture</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/mobile-app-crib-notes/react-native/santoku/test-planning">Test Planning</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/mobile-app-crib-notes/react-native/santoku/design">Design</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/mobile-app-crib-notes/react-native/santoku/development">Development</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/mobile-app-crib-notes/react-native/santoku/maintenance">Maintenance</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/mobile-app-crib-notes/react-native/santoku/decisions">Decision Records</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/mobile-app-crib-notes/react-native/santoku/decisions">目次</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/mobile-app-crib-notes/react-native/santoku/decisions/adr-001-error-handling">グローバルエラーハンドリング</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/mobile-app-crib-notes/react-native/santoku/decisions/adr-002-http-api-libraries">HTTP通信で使用するライブラリ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/mobile-app-crib-notes/react-native/santoku/decisions/adr-003-http-api-error-handling">HTTP API通信で発生するエラーのハンドリング</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/mobile-app-crib-notes/react-native/santoku/decisions/adr-004-deep-link">ディープリンクの実現方式（廃止）</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/mobile-app-crib-notes/react-native/santoku/decisions/adr-005-message">メッセージ管理の方針</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/mobile-app-crib-notes/react-native/santoku/decisions/adr-006-logging">ログ出力の方針</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/mobile-app-crib-notes/react-native/santoku/decisions/adr-007-auth">認証方式の方針</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/mobile-app-crib-notes/react-native/santoku/decisions/adr-008-push-notification">プッシュ通知方式の方針</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/mobile-app-crib-notes/react-native/santoku/decisions/adr-009-push-notification-fcm">FCMを用いたプッシュ通知の管理方針</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/mobile-app-crib-notes/react-native/santoku/decisions/adr-010-push-notification-contents">プッシュ通知の内容に関する方針</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/mobile-app-crib-notes/react-native/santoku/decisions/adr-011-cache-management">キャッシュの取り扱いに関する方針</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/mobile-app-crib-notes/react-native/santoku/decisions/adr-012-http-api">HTTP API通信に関する方針</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/mobile-app-crib-notes/react-native/santoku/decisions/adr-013-react-query">React Queryを用いた開発方針</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/mobile-app-crib-notes/react-native/santoku/decisions/adr-014-ui-libraries">UIライブラリの選定</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/mobile-app-crib-notes/react-native/santoku/decisions/adr-015-android-head-up-notification">Androidのヘッドアップ通知</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/mobile-app-crib-notes/react-native/santoku/decisions/adr-016-forced-app-updates">強制アプリアップデート</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/mobile-app-crib-notes/react-native/santoku/decisions/adr-017-map-view-library">地図表示ライブラリ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/mobile-app-crib-notes/react-native/santoku/decisions/adr-018-deep-link">ディープリンクの実現方式</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/mobile-app-crib-notes/react-native/santoku/decisions/adr-019-deep-link-navigation">ディープリンク受信時の画面遷移</a></div></li></ul></li></ul></nav><button type="button" title="サイドバーを隠す" aria-label="サイドバーを隠す" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">このページの見出し</button></div><div class="theme-doc-markdown markdown"><header><h1>プッシュ通知の内容に関する方針</h1></header><p>Status: Accepted</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="要約">要約<a href="#要約" class="hash-link" aria-label="要約 への直接リンク" title="要約 への直接リンク">​</a></h2><p>このアプリでは、以下のユースケースそれぞれに対して以下の内容のプッシュ通知を送信します。</p><ul><li>時間割の開始通知<ul><li>通知表示内容：タイトルと本文のみ</li><li>通知に含めるデータ：時間割の開始通知を表す通知タイプと、チームID・時間割IDのパラメータ</li><li>優先度：高（スリープ状態を解除する）</li><li>有効期限：12時間</li><li>折りたたみ：アプリ単位で集約（デフォルト）</li><li>通知チャンネル（Android）：FCMデフォルトのMiscellaneousを使用</li><li>通知タイプ（iOS）：使用しない</li><li>その他の設定：デフォルト</li></ul></li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="コンテキスト">コンテキスト<a href="#コンテキスト" class="hash-link" aria-label="コンテキスト への直接リンク" title="コンテキスト への直接リンク">​</a></h2><p>リモート通知を設計する上では、通知の表示内容やデータを検討するだけでなく、
優先度や有効期限など送信制御に関する設定も考慮する必要があります。</p><p>ここでは次の観点でプッシュ通知に含める内容と設定について議論・調査を進めていきます。</p><ul><li>通知受信時の挙動</li><li>通知で表現できる内容</li><li>通知に含められるデータ</li><li>優先度</li><li>有効期限</li><li>折りたたみ</li><li>通知チャンネル（Android）</li><li>通知タイプ（iOS）</li><li>その他のOS固有のオプション</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="議論">議論<a href="#議論" class="hash-link" aria-label="議論 への直接リンク" title="議論 への直接リンク">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="通知受信時の挙動">通知受信時の挙動<a href="#通知受信時の挙動" class="hash-link" aria-label="通知受信時の挙動 への直接リンク" title="通知受信時の挙動 への直接リンク">​</a></h3><p>FCMを介したプッシュ通知では、通知内容に関するパラメータと、
クライアントアプリに渡せる任意のKey-Value構造のデータを指定して送信できます。</p><p>通知にデータを含めるかどうかは任意です。また、通知のタイトルや本文などを含まない、データのみの通知も送信できます。
FCMでは、通知のタイトルや本文を含むものはデータの有無にかかわらず通知メッセージと呼ばれています。
データのみを含むものはデータメッセージと呼ばれています。</p><p>データメッセージの場合は、OSの通知領域には通知が表示されず、通知音やバイブレーションもありません。
そのため、ユーザに知らせる必要はないが処理をしたい場合や、一旦アプリ側でデータを受け取って何か処理をした後にユーザへ伝える必要がある場合などに用いられます。
ただし、受信時にアプリが起動されていなかった場合、次にアプリが起動されるまでデータを用いた処理を開始できません。
リアルタイムに処理したい場合は、バックグラウンドサービスとして稼働させておく必要があります。</p><p>通知メッセージの場合、基本的には受信時にOSの通知領域にそのタイトルや本文などの内容が表示されます。
ただしユーザがアプリを前面で操作中であった場合、通知領域には通知は表示されません。
通知メッセージにデータが含まれている場合、既にアプリを前面で操作中であれば即時、そうでなければ通知のタップ時にそのデータをアプリ側で読み込んで利用できます。</p><p>このアプリにおける通知のユースケースでは、いずれも通知メッセージを利用します。
上記の動作をふまえて、このアプリでは通知メッセージの受信時に以下のようにふるまいます。</p><ul><li>アプリが前面で操作中であれば、スナックバーで通知内容をアプリ上に表示する。データに応じた処理があれば行うが、画面遷移などユーザの操作を妨げる処理は行わない。</li><li>アプリが未起動またはバックグラウンド状態の場合、通知領域に通知が表示される。通知タップ時にはアプリの状態の応じて以下のように処理を行う<ul><li>アプリのアクティビティがメモリ上に保持されている場合（ホットスタート）：通知タップ時にアプリを前面表示し、データに応じた処理を行う。</li><li>アプリのアクティビティがメモリ上に保持されていない場合（ウォームスタート）：通知タップ時にアプリを起動して初期化処理を行った後、データに応じた処理を行う。</li><li>アプリが起動されていない場合（コールドスタート）：通知タップ時にアプリを起動して初期化処理を行った後、データに応じた処理を行う。</li></ul></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="通知で表現できる内容">通知で表現できる内容<a href="#通知で表現できる内容" class="hash-link" aria-label="通知で表現できる内容 への直接リンク" title="通知で表現できる内容 への直接リンク">​</a></h3><p>FCMを介したプッシュ通知では、メッセージの内容として
<a href="https://firebase.google.com/docs/reference/fcm/rest/v1/projects.messages" target="_blank" rel="noopener noreferrer">公式ドキュメント</a>
に記載されている項目を設定できます。</p><p>ここでは、その中から主な項目について検討します。</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="通知のタイトル本文画像">通知のタイトル・本文・画像<a href="#通知のタイトル本文画像" class="hash-link" aria-label="通知のタイトル・本文・画像 への直接リンク" title="通知のタイトル・本文・画像 への直接リンク">​</a></h4><p>FCMからプッシュ通知を送信する場合に、送信先OSによらず共通で指定できる要素はタイトル、本文、画像の3種です。
通知領域に通知内容が表示する際のタイトル、本文、画像を指定できます。</p><p>画像については、iOSの場合はクライアントアプリ側にも画像を通知に表示するための処理を追加する必要があります。
詳細については、<a href="https://firebase.google.com/docs/cloud-messaging/ios/send-image?hl=ja" target="_blank" rel="noopener noreferrer">通知ペイロードで画像を送信する</a>を参照してください。</p><p>JPEG、PNG、BMPがAndroid、iOSともにサポートされており、iOSではアニメーションGIFとビデオも利用できます。
Androidには1MBの画像サイズ制限があります。</p><p>このアプリでは、通知のユースケースに合わせたタイトル、本文を送信します。
画像はこのアプリでは利用しません。</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>注記</div><div class="admonitionContent_S0QG"><p>FCMを介したプッシュ通知送信では、パラメータとしてプラットフォームを問わない共通属性と、プラットフォーム個別の属性を指定できます。
タイトルや本文などは、共通属性とプラットフォーム個別の属性の両方で指定できます。
両方指定した場合、プラットフォーム個別の属性が設定されていればそのOSではそちらの設定が優先して使用されます。</p></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="通知音バイブレーションパターンledパターン">通知音・バイブレーションパターン・LEDパターン<a href="#通知音バイブレーションパターンledパターン" class="hash-link" aria-label="通知音・バイブレーションパターン・LEDパターン への直接リンク" title="通知音・バイブレーションパターン・LEDパターン への直接リンク">​</a></h4><p>AndroidやiOSでは通知音も変更できます。
またAndroidでは、バイブレーションパターン、LEDの発光パターンなども指定できます。
通常はOSのシステム設定を用いるデフォルトの方がユーザの混乱を招かないでしょう。</p><p>このアプリではこれらの設定はデフォルトのままとします。</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="バッジ表示">バッジ表示<a href="#バッジ表示" class="hash-link" aria-label="バッジ表示 への直接リンク" title="バッジ表示 への直接リンク">​</a></h4><p>AndroidやiOSでは、アプリアイコンの上に未読数などを示す数字が表示できます。
これはバッジ表示と呼ばれています。</p><p>プッシュ通知のパラメータで、このバッジで表示する数値を変更できます。
0を指定すると、バッジの数値は初期化され表示されなくなります。
指定しなかった場合、デフォルトではAndroidとiOSでは以下の数値が表示されます。</p><ul><li>Android: 通知ドロワーに残っているそのアプリの通知の数</li><li>iOS: バッジの数値は変動しない</li></ul><p>また、このバッジの数値はクライアントアプリ側でも変更できます。
例えば未読通知としてバッジ表示を利用する場合は、既読になった時点でバッジの数値を変更する必要があります。
React Nativeの場合、expo-notificationsなどの通知全般を取り扱うライブラリを用いてバッジの数値を変更できます。</p><p>このアプリでは、プッシュ通知受信時にはバッジの数値は指定せず、デフォルトの動作に任せます。
また、クライアントアプリ側でのバッジの数値の変更は行いません。</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>注記</div><div class="admonitionContent_S0QG"><p>通知内容によっては、通知の目的が達せられた場合にバッジの数値を変化させるだけでなく、さらにOSの通知領域から通知を削除したい場合があります。
例えば新着メールを受信し、メールアプリから通知を受け取ったとします。
ユーザが通知をタップせずに直接アプリを開いて新着メールを確認した場合、そのデバイスの通知領域に残されている通知は不要になります。
通知領域からの通知の削除が必要な場合は、クライアントアプリ側に削除処理を組み込む必要があります。</p><p>React Nativeの場合、expo-notificationsなどのライブラリを利用することで、
現在デバイスの通知領域に表示されている通知一覧を取得できます。
また、指定した通知の通知領域からの削除もできます。
削除対象とする通知は、通知一覧や通知タップ時のイベントなどから取得したIDで指定できます。</p></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="通知に含められるデータ">通知に含められるデータ<a href="#通知に含められるデータ" class="hash-link" aria-label="通知に含められるデータ への直接リンク" title="通知に含められるデータ への直接リンク">​</a></h3><p>通知に含められるデータについては、
<a href="https://firebase.google.com/docs/cloud-messaging/concept-options" target="_blank" rel="noopener noreferrer">FCMメッセージについて</a>
のドキュメント内に記載されています。</p><p>データには、一部のFCMによって予約されたkeyを除き、任意のKey-Valueペアの文字列データを格納可能です。
最大ペイロードは4KBです。ただし、Firebaseコンソールからメッセージを送信する場合は例外となり、1,024文字の上限が適用されます。</p><p>このアプリでは、OSの通知領域に通知を表示し、それをタップするとアプリを起動した上で通知内のデータに応じて適切なアクションを行うことを想定しています。
そのため、通知のタイトルや本文に加えてデータも含めた通知メッセージとして送信します。
通知メッセージでは、デフォルトでは通知をタップするとアプリが起動されます。
既にアプリが起動されている場合は、アプリが現在の状態で前面に表示されます。</p><p>データの形式は、通知のタイプとそれに付随するパラメータを含めた以下のような形式で送信します。</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;type&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;StartedTimetable&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;params&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;teamId&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">123</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;timetableId&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">456</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>このアプリでは、通知がタップされたタイミングで通知に含まれるデータを確認し、データのタイプに応じて適切なアクションを行います。
どのタイプを受け取ったときにどのようなアクションを行うかは、クライアント側のコードで管理するものとします。
例えば例に挙げた時間割の開始通知の場合は、タップ時にアプリを起動してデータを読み込み、ホーム画面の当日の時間割画面を開きます。
ただし、ユーザがアプリを前面で操作中の場合は操作の妨げにならないよう画面遷移は行わず、スナックバーで内容を通知するにとどめます。</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="優先度">優先度<a href="#優先度" class="hash-link" aria-label="優先度 への直接リンク" title="優先度 への直接リンク">​</a></h3><p>通知には、メッセージの優先順位を決める優先度を指定できます。</p><p>Androidの場合、NORMALとHIGHの2種類を指定できます。
NORMALの場合は、スリープ状態のデバイスには通知は届かず、スリープ状態が解除されてから表示されます。
またバッテリーを節約するために配信を遅らせる場合があります。
HIGHの場合は、デバイスがスリープ状態であってもスリープ状態を解除して通知が表示されます。
デフォルト値はデータメッセージの場合はNORMAL、通知メッセージの場合はHIGHです。</p><p><a href="https://developer.android.com/topic/performance/power/power-details.html" target="_blank" rel="noopener noreferrer">電源管理に関する制限</a>に記載されているように、
デバイスの状態によっては優先度HIGHの通知回数に1日あたりの上限が設けられています。
上限に到達した後のメッセージは、すべて通常の優先度のメッセージとして処理されます。
必要な通知のみHIGHを設定するようにしましょう。</p><p>iOSの場合、優先度は5か10の数値で設定できます。
5（標準の優先度）の場合は、AndroidにおけるNORMALと同様に、デバイスの電源状態に応じて通知が届けられます。
10（高優先度）の場合は、AndroidにおけるHIGHと同様に、デバイスがスリープ状態であってもスリープ状態を解除して通知が表示されます。
デフォルト値は10です。</p><p>iOSの場合、通知メッセージではなくデータメッセージを送信する場合は、優先度を5（標準の優先度）に設定する必要があります。
10（高優先度）でデータメッセージを送信するとINVALID_ARGUMENTのエラーとなり、送信が拒否されます。</p><p>このアプリにおける時間割の開始通知は1日1回程度で、スリープ時にも気づいてもらいたいものです。
そのため、Android、iOSともに高優先度を指定します。</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="有効期限">有効期限<a href="#有効期限" class="hash-link" aria-label="有効期限 への直接リンク" title="有効期限 への直接リンク">​</a></h3><p>デバイスが通知を受信できない状態である場合、通知は各OSのリモート通知サービスで保持され、有効期限に達するまでは定期的に再配信が試み続けられます。</p><p>Androidの場合、有効期限を0～2,419,200秒（28日）の間で設定できます。
0を設定した場合は一度だけ配信を試み、到達できなかった場合は即座に破棄されます。
0以外を設定した場合は、一度配信を試みた後も設定された秒数が経過するまでの間は再試行されます。
Androidでは、デフォルトの有効期限は28日となっています。</p><p>iOSの場合、有効期限をUNIXエポック秒で設定できます。
0を指定した場合は一度だけ配信を試み、到達できなかった場合は即座に破棄されます。
0以外を設定した場合は、一度配信を試みた後も設定されたUNIXエポック秒に到達するまでの間は再試行されます。
デフォルト値は、公式ドキュメント上では明記されていませんでした。</p><p>例えば天気予報通知のようなケースでは、翌日になってから前日の天気予報通知を受信してもあまり意味がありません。
無駄な通知がユーザのデバイスに表示されないよう、ユースケースごとに適切な有効期限を検討する必要があります。
このアプリの時間割の開始通知では、その目的上、翌日以降に通知が届いても役に立たない内容であるため、有効期限は12時間とします。</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="折りたたみ">折りたたみ<a href="#折りたたみ" class="hash-link" aria-label="折りたたみ への直接リンク" title="折りたたみ への直接リンク">​</a></h3><p>AndroidやiOSでは、通知をグループに分類し、同じグループの通知を1つに集約して表示する機能を提供しています。
折りたたみ可能メッセージとも呼ばれています。
この機能により、チャットアプリでの新着通知など高頻度で通知が送信されるユースケースでも、ユーザのデバイスの通知領域を埋め尽くさずに1つの表示に集約できます。</p><p>折りたたみは、通知に指定した折りたたみキーの単位で行われます。
同じ折りたたみキーが指定された通知メッセージは、最新のものだけがデバイスの通知領域に表示されます。
FCMから通知を送信する際に折りたたみキーを指定しなかった場合、デフォルトではFCMに設定されたアプリパッケージ名が使用されます。
つまり、同じアプリからの通知が全て1つに集約されて表示されます。</p><p>FCMでは同時に配信予約できる折りたたみキーは4種類までという制約があります。
これを超えて通知の配信予約を行った場合、FCMでは4種類の折りたたみキーの通知のみが保持され、あふれた通知は送信されません。
この時、どの通知が保持されるかの保証はありません。
そのため、折りたたみキーも4種類までに抑えておくのが望ましいでしょう。</p><p>今回のこのアプリでは通知の種類が1つしか存在しないため、
折りたたみキーは明示的に指定せず全てデフォルト値を用います。</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="通知チャンネルandroid">通知チャンネル（Android）<a href="#通知チャンネルandroid" class="hash-link" aria-label="通知チャンネル（Android） への直接リンク" title="通知チャンネル（Android） への直接リンク">​</a></h3><p>Android 8.0以降では、通知チャンネル（カテゴリ）という機能が提供されています。
これは、通知に関する設定を、通知チャンネルごとに個別に切り替えられる機能です。</p><p>例えば、重要なお知らせと通常のお知らせの通知チャンネルを分けておくと、ユーザが重要なお知らせだけ表示するといった設定を行えるようになります。
これにより、ユーザにより通知を全て無効化されてしまう可能性は下がることが期待できます。</p><p>Android 8.0以降、Androidでは通知は全ていずれかの通知チャンネルに割り当てることが求められるようになりました。
Android 8.0（APIレベル26）をターゲットとしているアプリで、通知チャネルを指定せずに通知を送信した場合、通知は表示されず、エラーがログに記録されます。</p><p>FCMから通知を送信する際にも、この通知チャンネルを指定できます。
クライアントアプリにFirebase SDKを組み込んでいる場合、Firebase SDKは自動的に&quot;Miscellaneous&quot;（その他）という通知チャンネルを作成します。
FCMから明示的に通知チャンネルを指定せずに通知を送信した場合、デフォルトでこの通知チャンネル宛として通知が送信されます。
そのため、クライアントアプリに通知チャンネルを作成する処理を独自に追加していなくても、Android端末で通知が表示されないといった事態は避けられます。</p><p>独自の通知チャンネルを使用する場合は、事前にクライアントアプリ側で通知チャンネルを作成しておく必要があります。
Firebase SDKは任意の通知チャンネルを作成する機能までは提供していません。
React Nativeの場合、expo-notificationsなどの通知全般を取り扱うライブラリを用いて通知チャンネルを作成できます。</p><p>このアプリでは通知の種類が1つしか存在しないため、FCMデフォルトのMiscellaneousをそのまま使用します。</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="通知タイプios">通知タイプ（iOS）<a href="#通知タイプios" class="hash-link" aria-label="通知タイプ（iOS） への直接リンク" title="通知タイプ（iOS） への直接リンク">​</a></h3><p>iOSでは、<a href="https://developer.apple.com/documentation/usernotifications/declaring_your_actionable_notification_types" target="_blank" rel="noopener noreferrer">通知タイプ（カテゴリ）</a>という機能が提供されています。
これは、クライアントアプリ側で通知タイプを定義しておくことで、その通知タイプが指定された通知を受け取った際にカスタマイズされたレイアウトで通知を表示できます。
これは単純なレイアウト変更だけでなく、通知領域へのアクション用ボタンの配置もできます。
例えば会議への招待通知であれば、承諾ボタンと拒否するボタンを通知内に表示することで、アプリを起動することなく返答できます。</p><p>FCMから通知を送信する際にも、この通知タイプを指定できます。
しかし、クライアントアプリ側での通知タイプ定義はFirebase SDKのサポート外であるため、別ライブラリなどで対応する必要があります。</p><p>このアプリでは、タイトルと本文があれば十分なユースケースしか存在しないため、通知タイプは利用しません。</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>注記</div><div class="admonitionContent_S0QG"><p>Androidにも、通知のレイアウトをカスタマイズしてボタンなどを設置できる機能は存在するのですが、ローカル通知でしか利用できません。リモート通知の場合は、デフォルトの通知レイアウトしか利用できません。
どうしてもリモート通知でカスタムレイアウトの通知を表示したい場合は、データメッセージ形式で必要な情報を送り、
クライアント側でそのデータを用いて改めてローカル通知を表示する方法もあります。</p></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="その他のos固有のオプション">その他のOS固有のオプション<a href="#その他のos固有のオプション" class="hash-link" aria-label="その他のOS固有のオプション への直接リンク" title="その他のOS固有のオプション への直接リンク">​</a></h3><p>上記のオプションの他にも、Android、iOSは様々なOS固有のオプションを提供しており、FCMから通知を送信する際に指定できます。</p><p>Androidで指定可能なオプションは、<a href="https://firebase.google.com/docs/reference/fcm/rest/v1/projects.messages#androidnotification" target="_blank" rel="noopener noreferrer">こちら</a>に記載されています。
iOSで指定可能なオプションは、<a href="https://developer.apple.com/documentation/usernotifications/setting_up_a_remote_notification_server/generating_a_remote_notification#2943360" target="_blank" rel="noopener noreferrer">こちら</a>に記載されています。</p><p>例えばAndroidでは、通知アイコンや、通知受信時にステータスバーへ表示されるティッカーテキストなどを指定できます。
またiOSでは、通知のサブタイトルや、通知タップによりアプリを開く際の起動時画像などを指定できます。</p><p>このアプリでは、タイトルと本文があれば十分なユースケースしか存在しないため、こうした各OS固有のオプションは利用しません。</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="決定">決定<a href="#決定" class="hash-link" aria-label="決定 への直接リンク" title="決定 への直接リンク">​</a></h2><p>このアプリでは、以下のユースケースそれぞれに対して以下の内容のプッシュ通知を送信します。</p><ul><li>時間割の開始通知<ul><li>通知表示内容：タイトルと本文のみ</li><li>通知に含めるデータ：時間割の開始通知を表す通知タイプと、チームID・時間割IDのパラメータ</li><li>優先度：高（スリープ状態を解除する）</li><li>有効期限：12時間</li><li>折りたたみ：アプリ単位で集約（デフォルト）</li><li>通知チャンネル（Android）：FCMデフォルトのMiscellaneousを使用</li><li>通知タイプ（iOS）：使用しない</li><li>その他の設定：デフォルト</li></ul></li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="参考プッシュ通知に関連するandroidバージョンごとの変更点">参考：プッシュ通知に関連するAndroidバージョンごとの変更点<a href="#参考プッシュ通知に関連するandroidバージョンごとの変更点" class="hash-link" aria-label="参考：プッシュ通知に関連するAndroidバージョンごとの変更点 への直接リンク" title="参考：プッシュ通知に関連するAndroidバージョンごとの変更点 への直接リンク">​</a></h2><p>Android端末は比較的古いバージョンが長く使われていることが多く、幅広いOSバージョンをサポート対象とすることが多いです。
プッシュ通知の機能はAndroidのバージョンによっては大きな変更が入っているため、
どのバージョンでどのような変更が入ったのか意識しておく必要があります。</p><p>Androidにおける通知機能の互換性については以下を参照してください。
<a href="https://developer.android.com/guide/topics/ui/notifiers/notifications#compatibility" target="_blank" rel="noopener noreferrer">https://developer.android.com/guide/topics/ui/notifiers/notifications#compatibility</a></p><p>大きな変更点は以下のとおりです。</p><ul><li>Android 10<ul><li>アプリが独自のアクションボタンを提供しない場合、プラットフォームが通知アクションボタンを自動的に生成</li></ul></li><li>Android 8.0<ul><li>通知チャンネル（カテゴリ）を追加</li><li>通知バッジ（通知ドット）表示に対応</li></ul></li><li>Android 7.0<ul><li>通知のグループ化に対応</li><li>通知上からメッセージに直接返信したりテキストを入力できるダイレクト返信アクションの追加</li><li>通知テンプレートのスタイルが変更され、ヒーロー画像とアバターが重視されるように</li></ul></li><li>Android 5.0<ul><li>アプリが通知を発行した瞬間に表示されしばらくすると消えるヘッドアップ通知の導入</li><li>ロック画面を刷新。通知がロック画面に表示できるように</li></ul></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated"><b><time datetime="2023-03-31T05:21:13.000Z">2023年3月31日</time></b>に<!-- -->最終更新</span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="ドキュメントページ"><a class="pagination-nav__link pagination-nav__link--prev" href="/mobile-app-crib-notes/react-native/santoku/decisions/adr-009-push-notification-fcm"><div class="pagination-nav__sublabel">前へ</div><div class="pagination-nav__label">FCMを用いたプッシュ通知の管理方針</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/mobile-app-crib-notes/react-native/santoku/decisions/adr-011-cache-management"><div class="pagination-nav__sublabel">次へ</div><div class="pagination-nav__label">キャッシュの取り扱いに関する方針</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#要約" class="table-of-contents__link toc-highlight">要約</a></li><li><a href="#コンテキスト" class="table-of-contents__link toc-highlight">コンテキスト</a></li><li><a href="#議論" class="table-of-contents__link toc-highlight">議論</a><ul><li><a href="#通知受信時の挙動" class="table-of-contents__link toc-highlight">通知受信時の挙動</a></li><li><a href="#通知で表現できる内容" class="table-of-contents__link toc-highlight">通知で表現できる内容</a></li><li><a href="#通知に含められるデータ" class="table-of-contents__link toc-highlight">通知に含められるデータ</a></li><li><a href="#優先度" class="table-of-contents__link toc-highlight">優先度</a></li><li><a href="#有効期限" class="table-of-contents__link toc-highlight">有効期限</a></li><li><a href="#折りたたみ" class="table-of-contents__link toc-highlight">折りたたみ</a></li><li><a href="#通知チャンネルandroid" class="table-of-contents__link toc-highlight">通知チャンネル（Android）</a></li><li><a href="#通知タイプios" class="table-of-contents__link toc-highlight">通知タイプ（iOS）</a></li><li><a href="#その他のos固有のオプション" class="table-of-contents__link toc-highlight">その他のOS固有のオプション</a></li></ul></li><li><a href="#決定" class="table-of-contents__link toc-highlight">決定</a></li><li><a href="#参考プッシュ通知に関連するandroidバージョンごとの変更点" class="table-of-contents__link toc-highlight">参考：プッシュ通知に関連するAndroidバージョンごとの変更点</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Contents</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/mobile-app-crib-notes/reference">Reference</a></li></ul></div><div class="col footer__col"><div class="footer__title">React Native</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/mobile-app-crib-notes/react-native/learn">Learn</a></li><li class="footer__item"><a class="footer__link-item" href="/mobile-app-crib-notes/react-native/santoku">Example App</a></li><li class="footer__item"><a class="footer__link-item" href="/mobile-app-crib-notes/react-native/common-pitfalls">Trouble shooting</a></li></ul></div><div class="col footer__col"><div class="footer__title">Related Work</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://fintan.jp" target="_blank" rel="noopener noreferrer" class="footer__link-item">Fintan<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://fintan.jp/?p=5952" target="_blank" rel="noopener noreferrer" class="footer__link-item">SPA + REST API構成のサービス開発リファレンス<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://fintan.jp/blog-tag/react-native" target="_blank" rel="noopener noreferrer" class="footer__link-item">Fintan » React Native<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright"><div class="no-content">
<div class="copyright">
  ドキュメントは、<a rel="license" href="https://fintan.jp/?page_id=201" target="_blank">Fintan コンテンツ 使用許諾条項</a>の下に提供されており、コードサンプルは<a rel="license" href="https://www.apache.org/licenses/LICENSE-2.0" target="_blank">Apache 2.0 License</a>の下に提供されています。
</div>
<div class="supplementary">
  <a href="/mobile-app-crib-notes/terms-of-use/" class="footer__link-item">当サイトのご利用にあたって</a>
  <a href="/mobile-app-crib-notes/trademark/" class="footer__link-item">商標について</a>
</div>
</div>
</div></div></div></footer></div>
<script src="/mobile-app-crib-notes/assets/js/runtime~main.c82dcb28.js"></script>
<script src="/mobile-app-crib-notes/assets/js/main.1abe714a.js"></script>
</body>
</html>
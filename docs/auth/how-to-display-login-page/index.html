<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="モバイルアプリでは、ログイン画面をどのように表示するかについていくつか選択肢があり、それぞれで取りうる認証方法が変わってきます。 No. 表示方法 取"><meta name=theme-color content="#FFFFFF"><meta property="og:title" content="ログイン画面の表示パターン"><meta property="og:description" content="モバイルアプリでは、ログイン画面をどのように表示するかについていくつか選択肢があり、それぞれで取りうる認証方法が変わってきます。 No. 表示方法 取"><meta property="og:type" content="article"><meta property="og:url" content="/docs/auth/how-to-display-login-page/"><title>ログイン画面の表示パターン | Santoku</title><link rel=manifest href=../../../manifest.json><link rel=icon href=../../../favicon.png type=image/x-icon><link rel=stylesheet href=../../../book.min.b3215d9d1d18d9051e7fbe8f256ff80e30f41d29073b86348e230d297b771002.css integrity="sha256-syFdnR0Y2QUef76PJW/4DjD0HSkHO4Y0jiMNKXt3EAI="></head><body><input type=checkbox class=hidden id=menu-control><main class="container flex"><aside class=book-menu><nav><h2 class=book-brand><a href=../../../><span>Santoku</span></a></h2><ul><li><a href=../../../docs/notes-in-mobile-application-development/>セキュリティ</a></li><li><a href=../../../docs/auth/>認証アーキテクチャ</a><ul><li><a href=../../../docs/auth/how-to-display-login-page/ class=active>ログイン画面の表示パターン</a></li><li><a href=../../../docs/auth/management-of-log-in-credentials/>ログイン資格情報の管理</a></li><li><a href=../../../docs/auth/stateless-authn/>ステートレスな認証</a></li></ul></li><li><a href=../../../docs/webassets-integration/>Webアプリとの認証情報の連携</a><ul></ul></li></ul></nav><script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=../../../svg/menu.svg class=book-icon alt=Menu></label>
<strong>ログイン画面の表示パターン</strong>
<label for=toc-control><img src=../../../svg/toc.svg class=book-icon alt="Table of Contents"></label></div><input type=checkbox class=hidden id=toc-control><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#パターンごとのメリットデメリット>パターンごとのメリット・デメリット</a><ul><li><a href=#1-ログイン画面をネイティブ側に表示する>1. ログイン画面をネイティブ側に表示する</a></li><li><a href=#2-in-app-browserで認証サービスが用意しているログイン画面を表示する>2. In-App Browserで認証サービスが用意しているログイン画面を表示する</a></li><li><a href=#3-default-browserで認証サービスが用意しているログイン画面を表示する>3. Default Browserで認証サービスが用意しているログイン画面を表示する</a></li></ul></li></ul></nav></aside></header><article class=markdown><p>モバイルアプリでは、ログイン画面をどのように表示するかについていくつか選択肢があり、それぞれで取りうる認証方法が変わってきます。</p><table><thead><tr><th>No.</th><th>表示方法</th><th>取りうる認証方法の例</th></tr></thead><tbody><tr><td>1</td><td>ネイティブ側に表示する</td><td><ul><li>セッションID</li><li><a href=../../../docs/auth/stateless-authn/#リソースオーナーパスワードクレデンシャルズフロー>OpenID Connect（リソースオーナー・パスワード・クレデンシャルズフロー）</a></li></ul></td></tr><tr><td>2</td><td>In-App Browserで認証サービスが用意しているログイン画面を表示する</td><td><ul><li><a href=../../../docs/auth/stateless-authn/#認可コードフロー--pkce>OpenID Connect（認可コードフロー）</a></li><li>OpenID Connect（ハイブリッドフロー）</li></ul></td></tr><tr><td>3</td><td>Default Browserで認証サービスが用意しているログイン画面を表示する</td><td><ul><li><a href=../../../docs/auth/stateless-authn/#認可コードフロー--pkce>OpenID Connect（認可コードフロー）</a></li><li>OpenID Connect（ハイブリッドフロー）</li></ul></td></tr><tr><td><del>4</del></td><td><del>WebViewに表示する</del></td><td><del>OIDC認証</del></td></tr></tbody></table><blockquote class="book-hint danger">OpenID Connectでログイン画面を表示する時にWebViewを使わないでください。
代わりにIn-App Browserを使うように、2016/8にGoogle Developersから<a href=https://developers.googleblog.com/2016/08/modernizing-oauth-interactions-in-native-apps.html>勧告</a>が出ています。</blockquote><p>なお、2～4に記載しているブラウザの種類と、各OSでのブラウザやSDKとの対応は次のようになります。</p><table><thead><tr><th>ブラウザの種類</th><th>Android</th><th>iOS</th></tr></thead><tbody><tr><td>Default Browser</td><td>Chrome</td><td>Safari</td></tr><tr><td>In-App Browser</td><td><a href=https://developer.chrome.com/multidevice/android/customtabs>Chrome Custom Tabs</a></td><td><a href=https://developer.apple.com/documentation/authenticationservices/aswebauthenticationsession>ASWebAuthenticationSession</a></td></tr><tr><td>WebView</td><td><a href=https://developer.android.com/reference/android/webkit/WebView>WebView</a></td><td><a href=https://developer.apple.com/documentation/webkit/wkwebview>WKWebView</a></td></tr></tbody></table><h2 id=パターンごとのメリットデメリット>パターンごとのメリット・デメリット
<a class=anchor href=#%e3%83%91%e3%82%bf%e3%83%bc%e3%83%b3%e3%81%94%e3%81%a8%e3%81%ae%e3%83%a1%e3%83%aa%e3%83%83%e3%83%88%e3%83%87%e3%83%a1%e3%83%aa%e3%83%83%e3%83%88>#</a></h2><p>ログイン画面の表示方法ごとにメリット・デメリットを以下に示します。</p><blockquote class="book-hint info">以下に示す図は、モバイルアプリと認証サービスプロバイダー間の画面遷移を中心としてかなり簡略化した図です。仕様を正確に表現したものではないので注意してください。</blockquote><h3 id=1-ログイン画面をネイティブ側に表示する>1. ログイン画面をネイティブ側に表示する
<a class=anchor href=#1-%e3%83%ad%e3%82%b0%e3%82%a4%e3%83%b3%e7%94%bb%e9%9d%a2%e3%82%92%e3%83%8d%e3%82%a4%e3%83%86%e3%82%a3%e3%83%96%e5%81%b4%e3%81%ab%e8%a1%a8%e7%a4%ba%e3%81%99%e3%82%8b>#</a></h3><p><img src=authn-pattern-native.png alt></p><h4 id=メリット>メリット
<a class=anchor href=#%e3%83%a1%e3%83%aa%e3%83%83%e3%83%88>#</a></h4><ul><li>アプリケーション内で認証が完結するのでUXが良い</li><li>UIを自由にカスタマイズできる</li></ul><h4 id=デメリット>デメリット
<a class=anchor href=#%e3%83%87%e3%83%a1%e3%83%aa%e3%83%83%e3%83%88>#</a></h4><ul><li>モバイルアプリにユーザのIDとパスワードが渡ってしまうため、サードパーティの認証サービスは使えない<ul><li>例えば、SNSなどの認証サービスプロバイダーを使っている場合、モバイルアプリはユーザのSNSのIDとパスワードを知り、悪用できます</li></ul></li><li>Default BrowserとCookieを共有できないので、SNS認証などの場合一度Default Browserでログインしていても改めてログインが必要</li><li>ログイン画面を自作する必要がある</li></ul><h3 id=2-in-app-browserで認証サービスが用意しているログイン画面を表示する>2. In-App Browserで認証サービスが用意しているログイン画面を表示する
<a class=anchor href=#2-in-app-browser%e3%81%a7%e8%aa%8d%e8%a8%bc%e3%82%b5%e3%83%bc%e3%83%93%e3%82%b9%e3%81%8c%e7%94%a8%e6%84%8f%e3%81%97%e3%81%a6%e3%81%84%e3%82%8b%e3%83%ad%e3%82%b0%e3%82%a4%e3%83%b3%e7%94%bb%e9%9d%a2%e3%82%92%e8%a1%a8%e7%a4%ba%e3%81%99%e3%82%8b>#</a></h3><p><img src=authn-pattern-inappbrowser.png alt></p><h4 id=メリット-1>メリット
<a class=anchor href=#%e3%83%a1%e3%83%aa%e3%83%83%e3%83%88-1>#</a></h4><ul><li>アプリケーション内で認証が完結するのでUXが良い</li><li>Default BrowserとCookieを共有できるので、SNSログインなどの場合、一度Default Browserでログインしておけば、改めてログインする必要がない</li><li>セキュリティポリシーがブラウザベンダー準拠</li></ul><h4 id=デメリット-1>デメリット
<a class=anchor href=#%e3%83%87%e3%83%a1%e3%83%aa%e3%83%83%e3%83%88-1>#</a></h4><ul><li>In-App Browserを変更できる要素は、ツールバーの色や閉じるボタンのアイコンなどに限られているため、完全に思い通りのUIは実現できない</li></ul><h3 id=3-default-browserで認証サービスが用意しているログイン画面を表示する>3. Default Browserで認証サービスが用意しているログイン画面を表示する
<a class=anchor href=#3-default-browser%e3%81%a7%e8%aa%8d%e8%a8%bc%e3%82%b5%e3%83%bc%e3%83%93%e3%82%b9%e3%81%8c%e7%94%a8%e6%84%8f%e3%81%97%e3%81%a6%e3%81%84%e3%82%8b%e3%83%ad%e3%82%b0%e3%82%a4%e3%83%b3%e7%94%bb%e9%9d%a2%e3%82%92%e8%a1%a8%e7%a4%ba%e3%81%99%e3%82%8b>#</a></h3><p><img src=authn-pattern-defaultbrowser.png alt></p><h4 id=メリット-2>メリット
<a class=anchor href=#%e3%83%a1%e3%83%aa%e3%83%83%e3%83%88-2>#</a></h4><ul><li>ユーザが普段使い慣れたアプリケーションなので操作しやすい</li><li>SNS認証などの場合、一度Default Browserでログインしておけば、改めてログインする必要がない</li><li>セキュリティポリシーがブラウザベンダー準拠</li></ul><h4 id=デメリット-2>デメリット
<a class=anchor href=#%e3%83%87%e3%83%a1%e3%83%aa%e3%83%83%e3%83%88-2>#</a></h4><ul><li>別アプリケーション(ChromeやSafari)なのでUIをカスタムできない</li><li>別アプリケーション(ChromeやSafari)を開いて認証後に戻ってくる必要があるので、UXが多少低下する</li></ul></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><hr style=margin-top:4rem><p>ドキュメントは、<a rel=license href=http://creativecommons.org/licenses/by-sa/4.0/>クリエイティブ・コモンズ 表示 - 継承 4.0 国際 ライセンス</a>の下に提供されており、コードサンプルは<a rel=license href=https://www.apache.org/licenses/LICENSE-2.0>Apache 2.0 License</a>の下に提供されています。</p><div style=display:flex;justify-content:space-between;align-items:flex-start><p><a rel=license href=http://creativecommons.org/licenses/by-sa/4.0/><img alt=クリエイティブ・コモンズ・ライセンス style=border-width:0;height:auto src=https://i.creativecommons.org/l/by-sa/4.0/88x31.png></a></p><p><a href=../../../trademark/>商標について</a></p></div></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><nav id=TableOfContents><ul><li><a href=#パターンごとのメリットデメリット>パターンごとのメリット・デメリット</a><ul><li><a href=#1-ログイン画面をネイティブ側に表示する>1. ログイン画面をネイティブ側に表示する</a></li><li><a href=#2-in-app-browserで認証サービスが用意しているログイン画面を表示する>2. In-App Browserで認証サービスが用意しているログイン画面を表示する</a></li><li><a href=#3-default-browserで認証サービスが用意しているログイン画面を表示する>3. Default Browserで認証サービスが用意しているログイン画面を表示する</a></li></ul></li></ul></nav></aside></main></body></html>
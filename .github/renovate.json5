// Configuration Options | Renovate docs
// https://docs.renovatebot.com/configuration-options/
{
  addLabels: ['dependencies'],
  commitMessagePrefix: '⬆️: ',
  extends: ['config:base', ':preserveSemverRanges'],
  timezone: 'Asia/Tokyo',
  lockFileMaintenance: {
    enabled: true,
    schedule: ['before 20:00 on sunday'],
  },
  ignorePaths: ['react-native-samples/**'],
  packageRules: [
    {
      // expo upgradeで更新されるパッケージはRenovateの対象外とします
      groupName: 'Expo upgrade',
      enabled: false,
      matchPackageNames: [
        '@react-native-community/masked-view',
        'expo',
        'expo-keep-awake',
        'expo-splash-screen',
        'expo-updates',
        'react',
        'react-dom',
        'react-native',
        'react-native-gesture-handler',
        'react-native-reanimated',
        'react-native-safe-area-context',
        'react-native-screens',
        'react-native-unimodules',
        'react-native-web',
        '@babel/core',
        '@types/react',
        '@types/react-dom',
        '@types/react-native',
        'babel-preset-expo',
        'jest-expo',
        'typescript',
      ],
    },
    {
      // expo upgradeで更新されるパッケージに依存するパッケージは手動で更新する必要があるのでRenovateの対象外とします
      groupName: 'Depends on Expo version',
      enabled: false,
      matchPackageNames: [
        '@types/jest', // jest-expo -> jest
        'react-test-renderer', // jest-expo -> react-test-renderer
        'jest',
        'gradle', // expo-template-bare-typescript
      ],
      matchPackagePrefixes: ['com.facebook.flipper'],
    },
    {
      // React Navigationの関連パッケージはまとめて更新するようにします
      groupName: 'React Navigation',
      matchPackagePrefixes: ['@react-navigation/'],
    },
    {
      // React Native Firebaseの関連パッケージはまとめて更新するようにします
      groupName: 'React Native Firebase',
      matchPackagePrefixes: ['@react-native-firebase/'],
    },
    {
      // Docusaurusの関連パッケージはまとめて更新するようにします
      groupName: 'Docusaurus',
      matchPackagePrefixes: ['@docusaurus'],
      allowedVersions: "/^[0-9]+\\.[0-9]+\\.[0-9]+(-[\\w]+(\\.[0-9]{1,5})?)?$/"
    },
    {
      // Docusaurusの依存パッケージは手動で更新する必要があるのでRenovateの対象外とします
      groupName: 'Docusaurus dependencies',
      enabled: false,
      // SantokuAppのReactなどのパッケージとまとめられないように、website/package.jsonだけを対象にしています
      matchFiles: ['website/package.json'],
      matchPackageNames: ['@mdx-js/react', 'clsx', 'react', 'react-dom', '@tsconfig/docusaurus'],
    },
    {
      // ツール系のパッケージはまとめて更新するようにします
      groupName: 'Tools',
      matchPackageNames: [
        '@testing-library/react-native',
        '@typescript-eslint/eslint-plugin',
        '@typescript-eslint/parser',
        'cross-env',
        'eslint',
        'eslint-config-universe',
        'eslint-formatter-rdjson',
        'jest-junit',
        'npm-run-all',
        'patch-package',
        'prettier'
      ],
      matchPackagePrefixes: ['markdownlint', 'textlint', 'stylelint'],
    },
  ],
}
